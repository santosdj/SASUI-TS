(this["webpackJsonpsasui-ts"]=this["webpackJsonpsasui-ts"]||[]).push([[0],{488:function(e,t,n){"use strict";n.r(t);var r=n(575),i=n(0),a=n.n(i),o=n(76),s=n.n(o),c=n(308),l=n(574),u=n(611),d=n(49),p=n(34),b=n(9),m=n(16),j=n(3),f=n(121),h=n.n(f),_=n(287),v=n.n(_),y=n(286),x=n.n(y),O=n(220),g=n.n(O),w=n(283),k=n.n(w),C=n(285),S=n.n(C),q=n(221),P=n.n(q),I=n(284),N=n.n(I),E=n(594),A=n(595),T=n(596),R=n(587),W=n(597),U=n(106),D=n(309),B=n(70),L=n(225),F=n(598),M=n(200),z=n(48),V=n(572),G=n(593),H=n(586),J=n(107),X=n(5),K=n(8),Y=n(4),Z=n.n(Y),Q=n(18),$=n(576),ee=n(271),te=n.n(ee),ne=n(13),re=n(17),ie=new(function(){function e(){Object(ne.a)(this,e),this.refreshtokenname="@SAS:refreshToken",this.accesstokenname="@SAS:accessToken"}return Object(re.a)(e,[{key:"getLocalRefreshToken",value:function(){return localStorage.getItem(this.refreshtokenname)}},{key:"getLocalAccessToken",value:function(){return localStorage.getItem(this.accesstokenname)}},{key:"setLocalRefreshToken",value:function(e){return localStorage.setItem(this.refreshtokenname,e)}},{key:"setLocalAccessToken",value:function(e){return console.log("setting access tokens =",e),localStorage.setItem(this.accesstokenname,e)}},{key:"removeTokens",value:function(){localStorage.removeItem(this.accesstokenname),localStorage.removeItem(this.refreshtokenname)}}]),e}()),ae=te.a.create({baseURL:"http://localhost:3333",headers:{"Content-Type":"application/json"}});ae.interceptors.request.use(function(){var e=Object(Q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae.interceptors.request.use(function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t.headers&&(t.headers={}),(n=ie.getLocalAccessToken())&&(t.headers.Authorization="Bearer ".concat(n),t.headers["x-access-token"]=n),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return e})),ae.interceptors.response.use((function(e){return e}),function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i,a,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/sessions/azure"===(n=t.config).url||!t.response){e.next=19;break}if(401!==t.response.status||n._retry){e.next=19;break}return n._retry=!0,console.log("refreshing token"),e.prev=5,e.next=8,ae.post("/refresh-token",{token:ie.getLocalRefreshToken()});case 8:return r=e.sent,console.log("token refreshed",r.data),i=r.data,a=i.authtoken,o=i.refreshtoken,ie.setLocalAccessToken(a),ie.setLocalRefreshToken(o),e.abrupt("return",ae(n));case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",Promise.reject(e.t0));case 19:return e.abrupt("return",Promise.reject(t));case 20:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}());var oe=ae,se={auth:{clientId:"c827c118-bb11-42a8-983b-9708547af006",redirectUri:"http://localhost:3000/signin",authority:"https://".concat("login.microsoftonline.com","/").concat("c16146b1-239c-46bb-8b62-3f5daee78bcc"),knownAuthorities:["login.microsoftonline.com"],postLogoutRedirectUri:"/"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},ce={scopes:["".concat("c827c118-bb11-42a8-983b-9708547af006","/.default")]},le=["user.read"],ue=n(489);function de(e){return ue.Client.init({authProvider:function(t){t(null,e)}})}function pe(e){return be.apply(this,arguments)}function be(){return(be=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=de(t),e.next=3,n.api("/me").select("displayName,mail,userPrincipalName,photo").get();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return je.apply(this,arguments)}function je(){return(je=Object(Q.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://graph.microsoft.com/v1.0/".concat(t,"/photo/$value"),e.abrupt("return",fetch(r,{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=n(1),he=Object(i.createContext)({}),_e=new $.a(se);function ve(e){var t=e.children,n=Object(i.useState)(),r=Object(b.a)(n,2),a=r[0],o=r[1],s=function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((n=_e.getAllAccounts()).length<=0)){e.next=4;break}throw new Error("Login required");case 4:return e.next=6,_e.acquireTokenSilent({scopes:t,account:n[0]});case 6:return r=e.sent,e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0){e.next=17;break}return e.next=15,_e.acquireTokenPopup({scopes:t});case 15:return i=e.sent,e.abrupt("return",i);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.post("/sessions/azure",{idToken:t,email:n});case 3:return r=e.sent,e.abrupt("return",{authtoken:r.data.authtoken,refreshtoken:r.data.refreshtoken,message:"",success:!0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{authtoken:"",refreshtoken:"",message:e.t0.response?e.t0.response.data.message:e.t0.message,success:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();function l(e){return u.apply(this,arguments)}function u(){return(u=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me("me",t).then((function(e){if(e.ok)return e.blob()})).then((function(e){if(e)return URL.createObjectURL(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=Object(i.useCallback)(Object(Q.a)(Z.a.mark((function e(){var t,n,r,i,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(le);case 3:if(t=e.sent,n=t.accessToken,r=t.idToken,!n){e.next=32;break}return e.next=8,pe(n);case 8:return i=e.sent,console.log(i),localStorage.setItem("@AzureAd:accessToken",n),localStorage.setItem("@AzureAd:idToken",r),console.log("Setting account..."),e.next=15,c(r,i.mail);case 15:if(!(a=e.sent).success){e.next=30;break}return e.t0=o,e.t1=i.displayName,e.t2=i.mail||i.userPrincipalName,e.next=22,l(n);case 22:e.t3=e.sent,e.t4={displayName:e.t1,email:e.t2,avatar:e.t3},e.t5={isAuthenticated:!0,user:e.t4,error:null},(0,e.t0)(e.t5),ie.setLocalAccessToken(a.authtoken),ie.setLocalRefreshToken(a.refreshtoken),e.next=32;break;case 30:window.alert("Erro ao autenticar ".concat(a.message)),o({isAuthenticated:!1,user:{displayName:"",email:"",avatar:""},error:a.message});case 32:e.next=37;break;case 34:e.prev=34,e.t6=e.catch(0),o({isAuthenticated:!1,user:{displayName:"",email:"",avatar:""},error:e.t6});case 37:case"end":return e.stop()}}),e,null,[[0,34]])}))),[]);function p(){return(p=Object(Q.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.loginPopup({scopes:ce.scopes,prompt:"select_account"});case 3:return e.next=5,d();case 5:console.log("peguei o perfil...retornando..."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o({isAuthenticated:!1,user:{displayName:"",email:"",avatar:""},error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e=_e.getAllAccounts();console.log("No use effect do context"),e&&e.length>0&&(d(),console.log("Pegou o user profile no useEffect"))}),[d]),Object(fe.jsx)(he.Provider,{value:{signInWithAD:function(){return p.apply(this,arguments)},signOut:function(){localStorage.removeItem("@AzureAd:accessToken"),localStorage.removeItem("@AzureAd:idToken"),ie.removeTokens(),_e.logoutRedirect()},accountInfo:a},children:t})}function ye(){var e=Object(i.useContext)(he);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}var xe=n(219),Oe=n.n(xe),ge=n(279),we=n.n(ge),ke=n(591),Ce=n(584),Se=n(311),qe=n(568),Pe=n(577),Ie=Object(Pe.a)((function(){return{root:{width:"100%",maxWidth:360},nested:{paddingLeft:16}}}));function Ne(){var e=Ie();return Object(fe.jsxs)(ke.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:e.root,children:[Object(fe.jsxs)(Ce.a,{button:!0,component:d.b,to:"/",children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(we.a,{})}),Object(fe.jsx)(qe.a,{primary:"Home"})]},"Home"),Object(fe.jsxs)(Ce.a,{button:!0,component:d.b,to:"/sap/request",children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Oe.a,{color:"primary"})}),Object(fe.jsx)(qe.a,{primary:"SAP"})]},"Nova"),Object(fe.jsxs)(Ce.a,{button:!0,component:d.b,to:"/as400/request",children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Oe.a,{color:"primary"})}),Object(fe.jsx)(qe.a,{primary:"AS400"})]},"Nova 2")]})}var Ee=n(144),Ae=n.n(Ee),Te=n(280),Re=n.n(Te),We=n(182),Ue=n.n(We),De=n(183),Be=n.n(De),Le=n(184),Fe=n.n(Le),Me=n(592),ze=n.p+"static/media/sap2.bc41474a.svg",Ve=Object(Pe.a)((function(){return{root:{width:"100%",maxWidth:360},nested:{paddingLeft:16}}}));function Ge(){var e=Ve(),t=a.a.useState(!0),n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(fe.jsxs)(ke.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:e.root,children:[Object(fe.jsxs)(Ce.a,{component:d.b,to:"/requests/ordered/ci",children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Re.a,{})}),Object(fe.jsx)(qe.a,{primary:"Controles Internos"})]}),Object(fe.jsxs)(Ce.a,{button:!0,onClick:function(){i(!r)},children:[Object(fe.jsx)(Se.a,{color:"primary",children:Object(fe.jsx)("span",{children:Object(fe.jsx)("img",{src:ze,alt:"Menu SAP"})})}),Object(fe.jsx)(qe.a,{primary:""}),r?Object(fe.jsx)(Ue.a,{}):Object(fe.jsx)(Be.a,{})]}),Object(fe.jsx)(Me.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(fe.jsxs)(ke.a,{component:"div",disablePadding:!0,children:[Object(fe.jsxs)(Ce.a,{button:!0,className:e.nested,children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Fe.a,{})}),Object(fe.jsx)(qe.a,{primary:"Em an\xe1lise"})]}),Object(fe.jsxs)(Ce.a,{button:!0,className:e.nested,children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Ae.a,{})}),Object(fe.jsx)(qe.a,{primary:"Em Execu\xe7\xe3o"})]}),Object(fe.jsxs)(Ce.a,{button:!0,className:e.nested,children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Ae.a,{})}),Object(fe.jsx)(qe.a,{primary:"Todas"})]})]})})]})}var He=n(281),Je=n.n(He),Xe=Object(Pe.a)((function(){return{root:{width:"100%",maxWidth:360},nested:{paddingLeft:16}}}));function Ke(){var e=Xe(),t=a.a.useState(!0),n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(fe.jsxs)(ke.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:e.root,children:[Object(fe.jsxs)(Ce.a,{button:!0,onClick:function(){i(!r)},children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Je.a,{})}),Object(fe.jsx)(qe.a,{primary:"Solicita\xe7\xf5es"}),r?Object(fe.jsx)(Ue.a,{}):Object(fe.jsx)(Be.a,{})]}),Object(fe.jsx)(Me.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(fe.jsxs)(ke.a,{component:"div",disablePadding:!0,children:[Object(fe.jsxs)(Ce.a,{button:!0,className:e.nested,component:d.b,to:"/requests/ordered/number",children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Fe.a,{})}),Object(fe.jsx)(qe.a,{primary:"N\xfamero"})]}),Object(fe.jsxs)(Ce.a,{button:!0,className:e.nested,component:d.b,to:"/requests/ordered/status",children:[Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Ae.a,{})}),Object(fe.jsx)(qe.a,{primary:"Status"})]})]})})]})}var Ye=n(62),Ze=n(31),Qe=n(569);function $e(){var e=230,t=Object(Pe.a)((function(t){var n;return Object(Qe.a)({root:{display:"flex"},title:(n={display:"none"},Object(j.a)(n,t.breakpoints.up("sm"),{display:"block"}),Object(j.a)(n,"paddingRight","20px"),n),appBar:{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{marginLeft:e,width:"calc(100% - ".concat(e,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:e,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:e,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},drawerClose:Object(j.a)({transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),overflowX:"hidden",width:t.spacing(7)+1},t.breakpoints.up("sm"),{width:t.spacing(9)+1}),toolbar:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),content:{flexGrow:1,padding:t.spacing(.3)},search:Object(j.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(Ye.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(Ye.a)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(3),width:"auto"}),searchIcon:{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(j.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"}),cardSection:{minHeight:140,width:"100%"},cardContent:{display:"flex",alignItems:"center"},cardAvatar:{display:"block",width:100,height:100,margin:20},sectionDesktop:Object(j.a)({display:"none"},t.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(j.a)({display:"flex"},t.breakpoints.up("md"),{display:"none"}),grow:{flexGrow:1}})})),n={accountmenu:{desktopid:"account-menu",mobileid:"account-menu-mobile",profiletext:"Perfil",accounttext:"Conta",avatar:"https://material-ui.com/static/images/avatar/1.jpg",avataralt:"Fake user"},message:{count:4,text:"show ".concat(2," new mails"),menutext:"Mensagens"},notification:{count:6,text:"show ".concat(4," new alerts"),menutext:"Notifica\xe7\xf5es"},search:{placeholder:"Pesquisar..."}},r=Object(Ze.a)();return{config:n,classes:t(),drawerWidth:e,theme:r}}var et=230,tt=function(e){return{width:et,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},nt=function(e){return Object(j.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(9)," + 1px)")})},rt=Object(X.a)(H.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(m.a)(Object(m.a)({width:et,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&Object(m.a)(Object(m.a)({},tt(t)),{},{"& .MuiDrawer-paper":tt(t)})),!n&&Object(m.a)(Object(m.a)({},nt(t)),{},{"& .MuiDrawer-paper":nt(t)}))})),it=Object(X.a)(G.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(m.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:et,width:"calc(100% - ".concat(et,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})}));function at(){var e=ye(),t=e.accountInfo,n=e.signOut,r=a.a.useState(!1),i=Object(b.a)(r,2),o=i[0],s=i[1],c=$e(),l=c.config,u=c.classes,d=c.theme,p=a.a.useState(null),m=Object(b.a)(p,2),f=m[0],_=m[1],y=a.a.useState(null),O=Object(b.a)(y,2),w=O[0],C=O[1],q=Boolean(f),I=Boolean(w),G=function(e){_(e.currentTarget)},H=function(){C(null)},X=function(){_(null),H()},Y=Object(fe.jsxs)(E.a,{className:u.cardSection,children:[Object(fe.jsx)(A.a,{children:Object(fe.jsxs)(T.a,{children:[Object(fe.jsx)(R.a,{alt:null===t||void 0===t?void 0:t.user.displayName,src:null===t||void 0===t?void 0:t.user.avatar,className:u.cardAvatar}),Object(fe.jsxs)("div",{children:[Object(fe.jsx)("div",{children:null===t||void 0===t?void 0:t.user.displayName}),Object(fe.jsx)("div",{children:null===t||void 0===t?void 0:t.user.email})]})]})}),Object(fe.jsxs)(W.a,{children:[Object(fe.jsx)(U.a,{size:"small",color:"primary",onClick:n,children:"Sign Out"}),Object(fe.jsx)(U.a,{size:"small",color:"primary",onClick:X,children:"Fechar"})]})]}),Z=Object(fe.jsx)(D.a,{anchorEl:f,anchorOrigin:{vertical:"top",horizontal:"right"},id:l.accountmenu.desktopid,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:q,onClose:X,children:Y}),Q=Object(fe.jsxs)(D.a,{anchorEl:w,anchorOrigin:{vertical:"top",horizontal:"right"},id:l.accountmenu.mobileid,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:I,onClose:H,children:[Object(fe.jsxs)(B.a,{children:[Object(fe.jsx)(J.a,{"aria-label":l.message.text,color:"inherit",size:"large",children:Object(fe.jsx)(L.a,{badgeContent:4,color:"secondary",children:Object(fe.jsx)(g.a,{})})}),Object(fe.jsx)("p",{children:l.message.menutext})]}),Object(fe.jsxs)(B.a,{children:[Object(fe.jsx)(J.a,{"aria-label":l.notification.text,color:"inherit",size:"large",children:Object(fe.jsx)(L.a,{badgeContent:l.notification.count,color:"secondary",children:Object(fe.jsx)(P.a,{})})}),Object(fe.jsx)("p",{children:l.notification.menutext})]}),Object(fe.jsxs)(B.a,{onClick:G,children:[Object(fe.jsx)(J.a,{"aria-label":"account of current user","aria-controls":l.accountmenu.desktopid,"aria-haspopup":"true",color:"inherit",size:"large"}),Object(fe.jsx)(h.a,{}),Object(fe.jsx)("p",{children:l.accountmenu.profiletext})]})]});return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(it,{position:"fixed",open:o,children:Object(fe.jsxs)(F.a,{children:[Object(fe.jsx)(J.a,{color:"inherit","aria-label":"open drawer",onClick:function(){console.log("handle open"),s(!0)},edge:"start",className:Object(K.a)(u.menuButton,Object(j.a)({},u.hide,o)),size:"large",children:Object(fe.jsx)(k.a,{})}),Object(fe.jsx)(M.a,{className:u.title,variant:"h6",noWrap:!0,children:"SAS On Cloud"}),Object(fe.jsx)("div",{className:u.grow}),Object(fe.jsxs)("div",{className:u.search,children:[Object(fe.jsx)("div",{className:u.searchIcon,children:Object(fe.jsx)(N.a,{})}),Object(fe.jsx)(z.c,{placeholder:l.search.placeholder,classes:{root:u.inputRoot,input:u.inputInput},inputProps:{"aria-label":"search"}})]}),Object(fe.jsx)("div",{className:u.grow}),Object(fe.jsxs)("div",{className:u.sectionDesktop,children:[Object(fe.jsx)(J.a,{"aria-label":l.message.text,color:"inherit",size:"large",children:Object(fe.jsx)(L.a,{badgeContent:l.message.count,color:"secondary",children:Object(fe.jsx)(g.a,{})})}),Object(fe.jsx)(J.a,{"aria-label":l.notification.text,color:"inherit",size:"large",children:Object(fe.jsx)(L.a,{badgeContent:l.notification.count,color:"secondary",children:Object(fe.jsx)(P.a,{})})}),Object(fe.jsx)(J.a,{edge:"end","aria-label":"account of current user","aria-controls":l.accountmenu.desktopid,"aria-haspopup":"true",onClick:G,color:"inherit",size:"large",children:Object(fe.jsx)(R.a,{alt:null===t||void 0===t?void 0:t.user.displayName,src:null===t||void 0===t?void 0:t.user.avatar})})]}),Object(fe.jsx)("div",{className:u.sectionMobile,children:Object(fe.jsx)(J.a,{"aria-label":"show more","aria-controls":l.accountmenu.mobileid,"aria-haspopup":"true",onClick:function(e){C(e.currentTarget)},color:"inherit",size:"large",children:Object(fe.jsx)(S.a,{})})})]})}),Q,Z,Object(fe.jsxs)(rt,{variant:"permanent",open:o,children:[Object(fe.jsx)("div",{className:u.toolbar,children:Object(fe.jsx)(J.a,{onClick:function(){console.log("handle close"),s(!1)},size:"large",children:"rtl"===d.direction?Object(fe.jsx)(x.a,{}):Object(fe.jsx)(v.a,{})})}),Object(fe.jsx)(V.a,{}),Object(fe.jsx)(Ne,{}),Object(fe.jsx)(V.a,{}),Object(fe.jsx)(Ke,{}),Object(fe.jsx)(Ge,{})]})]})}function ot(e){var t=e.children,n=$e().classes;return Object(fe.jsxs)("div",{className:n.root,children:[Object(fe.jsx)(at,{}),Object(fe.jsxs)("main",{className:n.content,children:[Object(fe.jsx)("div",{className:n.toolbar}),t]})]})}var st=n(75),ct=n(291),lt=n.n(ct),ut=n(290),dt=n.n(ut),pt=n(288),bt=n.n(pt),mt=n(292),jt=n.n(mt),ft=n(289),ht=n.n(ft),_t=n(602),vt=n(316),yt=n(581),xt=n(603);function Ot(){return Object(fe.jsx)("div",{children:"Para aprovar"})}var gt=[{field:"id",headerName:"ID",width:100,hide:!0},{field:"status",headerName:"Status",width:100},{field:"employee_fullname",headerName:"Colaborador",width:300},{field:"employee_email",headerName:"Email",width:200},{field:"employee_type_description",headerName:"Tipo colaborador",sortable:!0,width:120},{field:"request_type",headerName:"Tipo Chamado",sortable:!0,width:150},{field:"updated_at",headerName:"atualizado em",sortable:!0,width:200}],wt=[{field:"id",headerName:"ID",width:100,hide:!0},{field:"status",headerName:"Status",width:100},{field:"request_number",headerName:"N\xfamero",width:180},{field:"employee_fullname",headerName:"Colaborador",width:300},{field:"employee_type_description",headerName:"Tipo colaborador",sortable:!0,width:120},{field:"request_type",headerName:"Tipo Chamado",sortable:!0,width:150},{field:"updated_at",headerName:"atualizado em",sortable:!0,width:200}],kt=[{field:"id",headerName:"ID",width:100,hide:!0},{field:"request_status",headerName:"Status",width:100},{field:"request_number",headerName:"N\xfamero",width:180},{field:"employee_fullname",headerName:"Colaborador",width:300},{field:"employee_type_description",headerName:"Tipo colaborador",sortable:!0,width:120},{field:"request_type",headerName:"Tipo Chamado",sortable:!0,width:150},{field:"updated_at",headerName:"atualizado em",sortable:!0,width:200}],Ct=n(68),St=n(15),qt=function(){function e(){Object(ne.a)(this,e)}return Object(re.a)(e,[{key:"getRequestList",value:function(){var e=Object(Q.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/requests");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getServicesCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"SAP",description:"SAP"},{id:"AS400",description:"AS400"},{id:"Desligamento",description:"Desligamento"},{id:"Outros",description:"Outros"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserRequestsByUserId",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r,i,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/requests/user/".concat(t,"/").concat(n));case 2:if(r=e.sent,!(i=r.data)){e.next=8;break}return console.log(i),a=i.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{id:e.request_id,status:e.status.status})})),e.abrupt("return",a);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserRequestCount",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/requests/count/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatEmployeeData",value:function(e){return{id:e.request_id,request_by:e.requested_by_name,request_status:e.status.status,request_date:e.created_at,request_number:e.request_number,request_observation:e.request_observation,employee_role:{id:e.employee_role_id,description:e.employee_role_description},employee_plataform:{id:e.employee_plataform_id,description:e.employee_plataform_description},employee_costcenter:{id:e.employee_costcenter_id,description:e.employee_costcenter_description},request_category:{id:"",description:""},employee_type:{id:e.employee_type,description:e.employee_type_description},employee_manager:{id:e.employe_manager_id,description:e.employee_manager_name},employee_company:{id:e.employee_company_id,description:e.employee_company_description},employee_branch:{id:e.employee_branch_id,description:e.employee_branch_description},employee:{id:e.employee_id,description:e.employee_fullname,email:e.employee_email},employee_userid_login:e.employee_login,employee_userid_as400:{id:e.employee_as400_id,description:e.employee_as400_id_description},request_type:e.request_type}}},{key:"getCurrentResponsable",value:function(e,t){var n=t.workflow?t.workflow.status.id:-1;if(-1!==n){var r,i;if(console.log(""),0===n)return e;if(1===n)return t.license.users.map((function(e){return e.fullname})).join(" / ");if(2===n)return t.ci.users.map((function(e){return e.fullname})).join(" / ");if(3===n)return t.cioilseeds.users.map((function(e){return e.fullname})).join(" / ");if(4===n)return"".concat(null===t||void 0===t||null===(r=t.lider)||void 0===r?void 0:r.fullname," / ").concat(null===t||void 0===t||null===(i=t.lider_backup)||void 0===i?void 0:i.fullname);if(5===n)return"N.A";if(6===n)return t.executors.users.map((function(e){return e.fullname}))}return"N.A"}},{key:"getRequestById",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i,a,o,s,c,l,u=this;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/requests/".concat(t));case 2:return n=e.sent,r=n.data,i=this.formatEmployeeData(r),a=r.saporderprofile?r.saporderprofile.map((function(e){return{id:e.id,service_id:e.service_id,service_description:e.service_description,environment:e.environment,user_id:e.user_id,job_position:""===e.job_position?"Outros":e.job_position,profile_name:e.profile_name,profile_description:e.profile_description,is_profile_temporary:e.is_profile_temporary,profile_expires_at:e.profile_expires_at,profile_valide_at:e.profile_valide_at,has_conflict:e.has_conflict,restricted_access:e.restricted_access,status:e.workflow?e.workflow.status.status:"",responsable:u.getCurrentResponsable(r.employee_manager_name,e)}})):null,o=r.saporderuser?r.saporderuser.map((function(e){return{id:e.id,service_id:e.service_id,service_description:e.service_description,environment:e.environment,user_id:e.user_id,job_position:"",profile_name:"",profile_description:"",is_profile_temporary:"",profile_expires_at:"",profile_valide_at:"",has_conflict:!1,restricted_access:!1,status:e.workflow?e.workflow.status.status:"",responsable:u.getCurrentResponsable(r.employee_manager_name,e)}})):null,s=r.as400orderprofile?r.as400orderprofile.map((function(e){return{id:e.id,service_id:e.service_id,service_description:e.service_description,environment:e.environment,is_new_user:e.is_new_user,user_id:e.user_id,system:e.system,routine:e.routine,access_type:e.access_type,restricted_access:e.restricted_acces,limited_access:e.limited_access,company_id:e.company_id,branch_id:e.branch_id,branch_name:e.branch_name,region_id:e.region_id,region_name:e.region_name,access:e.access,access_observation:e.access_observation,job_position:e.job_position,status:e.workflow?e.workflow.status.status:"",responsable:u.getCurrentResponsable(r.employee_manager_name,e)}})):null,c=r.as400orderuser?r.as400orderuser.map((function(e){return{id:e.id,service_id:e.service_id,service_description:e.service_description,environment:e.environment,is_new_user:e.is_new_user,user_id:e.user_id,copy_user_id_status:e.copy_user_id_status,copy_user_id:e.copy_user_id,status:e.workflow?e.workflow.status.status:"",responsable:u.getCurrentResponsable(r.employee_manager_name,e)}})):null,l=Object(m.a)(Object(m.a)({},i),{},{saptable:a||o?[].concat(Object(St.a)(a),Object(St.a)(o)):null,as400table:[].concat(Object(St.a)(c),Object(St.a)(s))}),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRequestWorkFlow",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/requests/workflow/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pt=new qt;function It(e){var t=e.report,n=e.columns,r=i.useState(),a=Object(b.a)(r,2),o=a[0],s=a[1],c=ye().accountInfo,l=i.useState(!1),u=Object(b.a)(l,2),d=u[0],m=u[1],j=Object(p.g)();function f(){return f=Object(Q.a)(Z.a.mark((function e(){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt.getUserRequestsByUserId((null===c||void 0===c?void 0:c.user.displayName)||"",t);case 2:n=e.sent,d||s(n);case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}return Object(i.useEffect)((function(){return m(!1),function(){f.apply(this,arguments)}(),function(){m(!0)}}),[]),Object(fe.jsx)("div",{style:{height:650,width:"95%"},children:Object(fe.jsx)(Ct.a,{rows:o||[],columns:n,pageSize:50,rowsPerPageOptions:[10,20,50,100],checkboxSelection:!1,onCellDoubleClick:function(e){var t=e.getValue(e.id,"id");return j.push("/request/".concat(t)),""}})})}function Nt(){return Object(fe.jsx)("div",{children:"to be done"})}var Et=["children","value","index"],At=Object(Pe.a)({root:{flexGrow:1}});function Tt(){var e=ye().accountInfo,t=At(),n=a.a.useState(1),r=Object(b.a)(n,2),o=r[0],s=r[1],c=a.a.useState(!0),l=Object(b.a)(c,2),u=l[0],d=l[1],p=a.a.useState({draft:0,open:0,closed:0,aproving:0,executing:0}),j=Object(b.a)(p,2),f=j[0],h=j[1];function _(){return(_=Object(Q.a)(Z.a.mark((function t(){var n,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null===e||void 0===e?void 0:e.user.displayName,t.next=3,Pt.getUserRequestCount(n);case 3:r=t.sent,h(r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(e){var t=e.children,n=e.value,r=e.index,i=Object(st.a)(e,Et);return Object(fe.jsx)("div",Object(m.a)(Object(m.a)({role:"tabpanel",hidden:n!==r,id:"scrollable-prevent-tabpanel-".concat(r),"aria-labelledby":"scrollable-prevent-tab-".concat(r)},i),{},{children:n===r&&Object(fe.jsx)(_t.a,{p:3,children:Object(fe.jsx)(M.a,{component:"div",children:t})})}))}return Object(i.useEffect)((function(){!function(){_.apply(this,arguments)}(),d(!1)}),[]),Object(fe.jsxs)(vt.a,{square:!0,className:t.root,children:[Object(fe.jsxs)(yt.a,{value:o,onChange:function(e,t){s(t)},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"icon label tabs example",children:[Object(fe.jsx)(xt.a,{icon:Object(fe.jsx)(bt.a,{}),label:"Rascunhos(".concat(null===f||void 0===f?void 0:f.draft,")")}),Object(fe.jsx)(xt.a,{icon:Object(fe.jsx)(ht.a,{}),label:"Em Andamento(".concat(null===f||void 0===f?void 0:f.open,")"),disabled:0===(null===f||void 0===f?void 0:f.open)}),Object(fe.jsx)(xt.a,{icon:Object(fe.jsx)(dt.a,{}),label:"Encerrados(".concat(null===f||void 0===f?void 0:f.closed,")")}),Object(fe.jsx)(xt.a,{icon:Object(fe.jsx)(lt.a,{}),label:"Para Aprovar(".concat(null===f||void 0===f?void 0:f.aproving,"\n        )")}),Object(fe.jsx)(xt.a,{icon:Object(fe.jsx)(jt.a,{}),label:"Para Executar(".concat(null===f||void 0===f?void 0:f.executing,")")})]}),u&&"...loading",!u&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(v,{value:o,index:0,children:Object(fe.jsx)(It,{columns:gt,report:"draft"})}),Object(fe.jsx)(v,{value:o,index:1,children:Object(fe.jsx)(It,{columns:wt,report:"open"})}),Object(fe.jsx)(v,{value:o,index:2,children:Object(fe.jsx)(It,{columns:kt,report:"closed"})}),Object(fe.jsx)(v,{value:o,index:3,children:Object(fe.jsx)(Ot,{})}),Object(fe.jsx)(v,{value:o,index:4,children:Object(fe.jsx)(Nt,{})})]})]})}var Rt=n(609),Wt=n(582),Ut=n(585),Dt=n(605),Bt=n(608),Lt=n(601),Ft=n(604),Mt=n(606),zt=n(607);function Vt(e){var t=e.rows;return Object(fe.jsx)(Ft.a,{component:vt.a,children:Object(fe.jsxs)(Dt.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(fe.jsx)(Mt.a,{children:Object(fe.jsxs)(zt.a,{children:[Object(fe.jsx)(Lt.a,{children:"Grupo"}),Object(fe.jsx)(Lt.a,{align:"right",children:"Respons\xe1veis"}),Object(fe.jsx)(Lt.a,{align:"right",children:"Pendentes"}),Object(fe.jsx)(Lt.a,{align:"right",children:"Analisados"}),Object(fe.jsx)(Lt.a,{align:"right",children:"Analisado por"}),Object(fe.jsx)(Lt.a,{align:"right",children:"Analisado em"})]})}),Object(fe.jsx)(Bt.a,{children:t.responsables.map((function(e,t){return Object(fe.jsxs)(zt.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(fe.jsx)(Lt.a,{align:"right",children:e.group}),Object(fe.jsx)(Lt.a,{align:"right",children:e.users.join(" / ")}),Object(fe.jsx)(Lt.a,{align:"right",children:e.doingCount}),Object(fe.jsx)(Lt.a,{align:"right",children:e.doneCount}),Object(fe.jsx)(Lt.a,{align:"right",children:e.doneBy})]},t)}))})]})})}function Gt(e){var t=e.request_id,n=i.useState(!1),r=Object(b.a)(n,2),a=r[0],o=r[1],s=i.useState([]),c=Object(b.a)(s,2),l=c[0],u=c[1],d=[],p=i.useState(0),j=Object(b.a)(p,2),f=j[0],h=j[1],_=i.useState(new Set),v=Object(b.a)(_,2),y=v[0],x=v[1];function O(){return(O=Object(Q.a)(Z.a.mark((function e(){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt.getRequestWorkFlow(t);case 2:n=e.sent,a||(n.forEach((function(e){e.isRequired&&d.push(e)})),u(d),console.log(n),r=d.findIndex((function(e){return e.isInitial})),h(-1===r?0:r),console.log("posi\xe7\xe3o corrente",r),console.log("definiu initial data",n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.useEffect((function(){return o(!1),function(){O.apply(this,arguments)}(),console.log("terminou de carregar"),function(){console.log("entrou no cancelado"),o(!0)}}),[]);var g=function(e){return y.has(e)};return Object(fe.jsxs)(_t.a,{sx:{width:"100%"},children:[l&&Object(fe.jsx)(Ut.a,{activeStep:f||0,sx:{marginTop:"24px",marginBottom:"24px",alignContent:"center",justifyContent:"center"},children:l.map((function(e,t){var n={},r={};return e.statusObservation&&(r.optional=Object(fe.jsx)(M.a,{variant:"caption",children:e.statusObservation})),g(t)&&(n.completed=e.isConcluded),n.completed=e.isConcluded,Object(fe.jsx)(Rt.a,Object(m.a)(Object(m.a)({},n),{},{color:"success",children:Object(fe.jsx)(Wt.a,Object(m.a)(Object(m.a)({},r),{},{children:e.status}))}),e.status)}))}),f===l.length?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(M.a,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),Object(fe.jsxs)(_t.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(fe.jsx)(_t.a,{sx:{flex:"1 1 auto"}}),Object(fe.jsx)(U.a,{onClick:function(){h(0)},children:"Reset"})]})]}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(M.a,{sx:{mt:2,mb:1},children:[l[f].text,Object(fe.jsx)(Vt,{rows:l[f]})]}),Object(fe.jsxs)(_t.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(fe.jsx)(U.a,{color:"inherit",disabled:0===f,onClick:function(){h((function(e){return e-1}))},sx:{mr:1},children:"Back"}),Object(fe.jsx)(_t.a,{sx:{flex:"1 1 auto"}}),Object(fe.jsx)(U.a,{onClick:function(){var e=y;g(f)&&(e=new Set(e.values())).delete(f),h((function(e){return e+1===l.length?0:e+1})),x(e)},children:f===d.length-1?"Finish":"Next"})]})]})]})}var Ht=[{field:"id",headerName:"ID",width:30,hide:!0},{field:"status",headerName:"Status",width:90},{field:"environment",headerName:"Ambiente",width:90},{field:"service_id",headerName:"C\xf3d.",width:60},{field:"service_description",headerName:"Servi\xe7o",width:180},{field:"user_id",headerName:"User ID",width:130},{field:"job_position",headerName:"Tipo Perfil",width:120},{field:"system",headerName:"Sis.",width:80},{field:"routine",headerName:"rotina.",width:80},{field:"access_type",headerName:"Seg",width:60},{field:"company_id",headerName:"Empresa",width:100},{field:"branch_id",headerName:"Filial.",width:120},{field:"region_id",headerName:"Regi\xe3o.",width:120},{field:"access",headerName:"Acesso",width:120},{field:"responsable",headerName:"Respons\xe1vel(eis)",sortable:!0,width:200}];function Jt(e){var t=e.rows;return Object(fe.jsx)("div",{style:{height:400,width:"100%"},children:Object(fe.jsx)(Ct.a,{rows:t,columns:Ht,pageSize:30,rowsPerPageOptions:[5,10,30],checkboxSelection:!0})})}var Xt=n(589),Kt=n(226);function Yt(e){var t=e.name,n=e.label,r=e.fullWidth,i=e.value,a=e.multiline,o=e.maxRows;return Object(fe.jsx)(Kt.a,{id:t,label:n,defaultValue:i,fullWidth:r,InputProps:{readOnly:!0},multiline:a,maxRows:o})}function Zt(e){var t=e.values,n=t.request_by,r=t.employee,i=t.request_date,a=t.employee_type,o=t.employee_role,s=t.employee_costcenter,c=t.employee_manager,l=t.request_number,u=t.request_status,d=t.employee_plataform,p=t.employee_company,b=t.employee_branch,m=t.request_observation;return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(Xt.a,{container:!0,justifyContent:"space-between",spacing:2,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:8,children:[Object(fe.jsx)(Yt,{name:"request_by",label:"Solicitante",fullWidth:!0,value:n||""}),Object(fe.jsx)(Yt,{name:"employee",label:"Colaborador",fullWidth:!0,value:r.description||""})]}),Object(fe.jsxs)(Xt.a,{item:!0,xs:4,children:[Object(fe.jsx)(Yt,{name:"request.request_date",label:"Data da solicita\xe7\xe3o",fullWidth:!1,value:i?i.toLocaleString():""}),Object(fe.jsx)(Yt,{name:"request.employee_type",label:"Tipo",value:(null===a||void 0===a?void 0:a.description)||"",fullWidth:!0})]})]}),Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(Yt,{name:"request.employee_role",label:"Cargo",value:o?"".concat(o.id,"-").concat(o.description):"",fullWidth:!0})}),Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(Yt,{name:"request.employee_costcenter",label:"Centro de Custo",value:s?"".concat(s.id,"-").concat(s.description):"",fullWidth:!0})})]}),Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(Yt,{name:"request.employee_manager",label:"Gestor",value:(null===c||void 0===c?void 0:c.description)||"",fullWidth:!0})})})]}),Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsxs)(Xt.a,{item:!0,xs:12,children:[Object(fe.jsx)(Yt,{name:"request.request_number",label:"N\xfamero",fullWidth:!1,value:l||""}),Object(fe.jsx)(Yt,{name:"request.request_status",label:"Status",fullWidth:!1,value:u||""})]})}),Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(Yt,{name:"request.employee",label:"Email",fullWidth:!0,value:r.email||""})}),Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(Yt,{name:"request.employee_plataform",label:"Plataforma",fullWidth:!0,value:(null===d||void 0===d?void 0:d.description)||""})})]}),Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(Yt,{name:"request.employee_company",label:"Empresa",fullWidth:!0,value:p?"".concat(p.id,"-").concat(p.description):""})}),Object(fe.jsx)(Xt.a,{item:!0,xs:7,children:Object(fe.jsx)(Yt,{name:"request.employee_branch",label:"Filial",fullWidth:!0,value:b?"".concat(b.id,"-").concat(b.description):""})})]}),Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:11,children:Object(fe.jsx)(Yt,{name:"request.request_observation",label:"Observa\xe7\xe3o",multiline:!0,maxRows:4,fullWidth:!0,value:m})})})]})]})})}var Qt=[{field:"id",headerName:"ID",width:30,hide:!0},{field:"status",headerName:"Status",width:90},{field:"environment",headerName:"Ambiente",width:90},{field:"service_id",headerName:"C\xf3d.",width:60},{field:"service_description",headerName:"Servi\xe7o",width:180},{field:"user_id",headerName:"User ID",width:130},{field:"job_position",headerName:"Tipo Perfil",width:120},{field:"profile_name",headerName:"Perfil",sortable:!0,width:400},{field:"profile_description",headerName:"Descri\xe7\xe3o",sortable:!0,width:400},{field:"responsable",headerName:"Respons\xe1vel(eis)",sortable:!0,width:200}];function $t(e){var t=e.rows;return console.log(t),Object(fe.jsx)("div",{style:{height:400,width:"100%"},children:Object(fe.jsx)(Ct.a,{rows:t,columns:Qt,pageSize:30,rowsPerPageOptions:[5,10,30],checkboxSelection:!1})})}function en(){var e=Object(p.h)(),t=i.useState(!1),n=Object(b.a)(t,2),r=n[0],a=n[1],o=i.useState(),s=Object(b.a)(o,2),c=s[0],l=s[1];function u(){return(u=Object(Q.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pt.getRequestById(e.id);case 2:n=t.sent,console.log("no form",n),r||(l(n),console.log("definiu initial data",n));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return i.useEffect((function(){return a(!1),function(){u.apply(this,arguments)}(),console.log("terminou de carregar"),function(){console.log("entrou no cancelado"),a(!0)}}),[]),Object(fe.jsx)(_t.a,{sx:{marginTop:"4px","& .MuiTextField-root":{m:1,minWidth:"30px"},"& .MuiInputBase-root":{m:1,minWidth:"30px"},"& .MuiDataGrid-root":{m:1,minWidth:"30px"}},children:c&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Zt,{values:c}),0!==c.saptable.length&&Object(fe.jsx)($t,{rows:c.saptable}),0!==c.as400table.length&&Object(fe.jsx)(Jt,{rows:c.as400table}),Object(fe.jsx)(Gt,{request_id:e.id})]})})}var tn=n(314),nn=n(504),rn=n(501),an=n(502),on=n(590);function sn(e){var t=e.classes,n=e.onSelectAllClick,r=e.order,i=e.orderBy,a=e.numSelected,o=e.rowCount,s=e.onRequestSort,c=e.headCells;return Object(fe.jsx)(Mt.a,{children:Object(fe.jsxs)(zt.a,{children:[Object(fe.jsx)(Lt.a,{padding:"checkbox",children:Object(fe.jsx)(tn.a,{indeterminate:a>0&&a<o,checked:o>0&&a===o,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),c.map((function(e){return Object(fe.jsx)(Lt.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:i===e.id&&r,children:Object(fe.jsxs)(on.a,{active:i===e.id,direction:i===e.id?r:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,i===e.id?Object(fe.jsx)("span",{className:t.visuallyHidden,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var cn=n(293),ln=n.n(cn),un=n(294),dn=n.n(un),pn=n(228),bn=Object(Pe.a)((function(e){return Object(Qe.a)({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.mode?{color:e.palette.secondary.main,backgroundColor:Object(Ye.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}})})),mn=function(e){var t=bn(),n=e.numSelected,r=e.title;return Object(fe.jsxs)(F.a,{className:Object(K.a)(t.root,Object(j.a)({},t.highlight,n>0)),children:[n>0?Object(fe.jsxs)(M.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(fe.jsx)(M.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:r}),n>0?Object(fe.jsx)(pn.a,{title:"Delete",children:Object(fe.jsx)(J.a,{"aria-label":"delete",size:"large",children:Object(fe.jsx)(ln.a,{})})}):Object(fe.jsx)(pn.a,{title:"Filter list",children:Object(fe.jsx)(J.a,{"aria-label":"filter list",size:"large",children:Object(fe.jsx)(dn.a,{})})})]})},jn=(Object(Pe.a)((function(e){return Object(Qe.a)({root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},highlight:"light"===e.palette.mode?{color:e.palette.secondary.main,backgroundColor:Object(Ye.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}})})),Object(Pe.a)((function(e){return Object(Qe.a)({root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})})));function fn(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function hn(e,t){return"desc"===e?function(e,n){return fn(e,n,t)}:function(e,n){return-fn(e,n,t)}}function _n(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}function vn(e){var t=e.rows,n=e.headerData,r=e.title,i=e.tableType,o=jn(),s=a.a.useState("asc"),c=Object(b.a)(s,2),l=c[0],u=c[1],d=a.a.useState("request_number"),m=Object(b.a)(d,2),j=m[0],f=m[1],h=a.a.useState([]),_=Object(b.a)(h,2),v=_[0],y=_[1],x=a.a.useState(0),O=Object(b.a)(x,2),g=O[0],w=O[1],k=a.a.useState(!1),C=Object(b.a)(k,2),S=C[0],q=C[1],P=a.a.useState(15),I=Object(b.a)(P,2),N=I[0],E=I[1],A=Object(p.g)(),T=function(e,t){var n=v.indexOf(t),r=[];-1===n?r=r.concat(v,t):0===n?r=r.concat(v.slice(1)):n===v.length-1?r=r.concat(v.slice(0,-1)):n>0&&(r=r.concat(v.slice(0,n),v.slice(n+1))),y(r)},R=function(e,t){A.push("/request/".concat(t))},W=N-Math.min(N,t.length-g*N);return Object(fe.jsxs)("div",{className:o.root,children:[Object(fe.jsxs)(vt.a,{className:o.paper,children:[Object(fe.jsx)(mn,{numSelected:v.length,title:r}),Object(fe.jsx)(Ft.a,{children:Object(fe.jsxs)(Dt.a,{className:o.table,"aria-labelledby":"tableTitle",size:S?"small":"medium","aria-label":"enhanced table",children:[Object(fe.jsx)(sn,{classes:o,numSelected:v.length,order:l,orderBy:j,onSelectAllClick:function(e){if(e.target.checked){var n=t.map((function(e){return e.request_id}));y(n)}else y([])},onRequestSort:function(e,t){u(j===t&&"asc"===l?"desc":"asc"),f(t)},rowCount:t.length,headCells:n}),Object(fe.jsxs)(Bt.a,{children:[_n(t,hn(l,j)).slice(g*N,g*N+N).map((function(e,t){var n,r=(n=e.request_id,-1!==v.indexOf(n)),a="enhanced-table-checkbox-".concat(t),o="status"===i?function(e,t,n){return Object(fe.jsxs)(zt.a,{hover:!0,role:"checkbox","aria-checked":t,tabIndex:-1,selected:t,onClick:function(t){return R(0,e.request_id)},children:[Object(fe.jsx)(Lt.a,{padding:"checkbox",children:Object(fe.jsx)(tn.a,{checked:t,inputProps:{"aria-labelledby":n},onClick:function(t){t.stopPropagation(),T(0,e.request_id)}})}),Object(fe.jsx)(Lt.a,{component:"th",id:n,scope:"row",padding:"none",children:e.request_status}),Object(fe.jsx)(Lt.a,{children:e.request_number}),Object(fe.jsx)(Lt.a,{align:"right",children:e.employee_fullname}),Object(fe.jsx)(Lt.a,{children:e.request_type})]},e.request_id)}(e,r,a):function(e,t,n){return Object(fe.jsxs)(zt.a,{hover:!0,onClick:function(t){return R(0,e.request_id)},role:"checkbox","aria-checked":t,tabIndex:-1,selected:t,children:[Object(fe.jsx)(Lt.a,{padding:"checkbox",children:Object(fe.jsx)(tn.a,{checked:t,inputProps:{"aria-labelledby":n},onClick:function(t){t.stopPropagation(),T(0,e.request_id)}})}),Object(fe.jsx)(Lt.a,{component:"th",id:n,scope:"row",padding:"none",children:e.request_number}),Object(fe.jsx)(Lt.a,{children:e.request_status}),Object(fe.jsx)(Lt.a,{align:"right",children:e.employee_fullname}),Object(fe.jsx)(Lt.a,{children:e.request_type})]},e.request_id)}(e,r,a);return o})),W>0&&Object(fe.jsx)(zt.a,{style:{height:(S?33:53)*W},children:Object(fe.jsx)(Lt.a,{colSpan:6})})]})]})}),Object(fe.jsx)(an.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:N,page:g,onPageChange:function(e,t){w(t)},onRowsPerPageChange:function(e){E(parseInt(e.target.value,10)),w(0)}})]}),Object(fe.jsx)(nn.a,{control:Object(fe.jsx)(rn.a,{checked:S,onChange:function(e){q(e.target.checked)}}),label:"Dense padding"})]})}function yn(){var e=Object(p.h)(),t=Object(i.useState)([]),n=Object(b.a)(t,2),r=n[0],a=n[1],o={headCells:"status"===e.orderby?[{id:"request_status",numeric:!1,disablePadding:!0,label:"Status"},{id:"request_number",numeric:!1,disablePadding:!1,label:"Num"},{id:"employee_fullname",numeric:!1,disablePadding:!1,label:"Colaborador"},{id:"request_type",numeric:!1,disablePadding:!1,label:"Tipo"}]:[{id:"request_number",numeric:!1,disablePadding:!0,label:"Num"},{id:"request_status",numeric:!1,disablePadding:!1,label:"Status"},{id:"employee_fullname",numeric:!1,disablePadding:!1,label:"Colaborador"},{id:"request_type",numeric:!1,disablePadding:!1,label:"Tipo"}]};function s(){return(s=Object(Q.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt.getRequestList();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),Object(fe.jsx)("div",{children:Object(fe.jsx)(vn,{rows:r,headerData:o.headCells,title:"Listagem de requests - ".concat(e.orderby),tableType:e.orderby})})}var xn=n.p+"static/media/LDC_logo.e1f3b1fa.png";function On(){var e=ye(),t=e.signInWithAD,n=e.accountInfo;Object(p.g)();function r(){return(r=Object(Q.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var i=Object(Pe.a)((function(e){return Object(Qe.a)({root:{display:"flex"},mainContent:{display:"flex",flexGrow:1,padding:e.spacing(3),flexDirection:"column",alignItems:"center"},thisContent:{display:"flex",flexGrow:1,padding:e.spacing(3),flexDirection:"column",alignItems:"left",maxWidth:500},logo:{width:200,padding:e.spacing(1)},button:{width:80,padding:0,alignItems:"center",marginLeft:50}})}))();return Object(fe.jsxs)("div",{className:i.root,children:[(null===n||void 0===n?void 0:n.isAuthenticated)?Object(fe.jsx)(p.a,{to:"/home"}):"",Object(fe.jsx)("main",{className:i.mainContent,children:Object(fe.jsxs)(vt.a,{children:[Object(fe.jsxs)("div",{className:i.root,children:[Object(fe.jsx)("img",{src:xn,alt:"LDC Brazil",className:i.logo}),Object(fe.jsxs)("div",{className:i.thisContent,children:[Object(fe.jsx)(M.a,{children:"Por favor, clique no bot\xe3o para fazer o login utilizando seu email da LDC."}),Object(fe.jsx)("div",{children:Object(fe.jsx)(U.a,{variant:"contained",color:"primary",onClick:function(){return r.apply(this,arguments)},children:"Entrar"})})]})]}),Object(fe.jsx)("p",{})]})})]})}var gn=n(297),wn=n.n(gn),kn=n(299),Cn=n.n(kn),Sn=n(298),qn=n.n(Sn),Pn=n(505),In=n(25),Nn=["children"];function En(e){var t=e.children;return Object(fe.jsxs)(fe.Fragment,{children:[t," "]})}function An(e){var t=e.children,n=Object(st.a)(e,Nn),r=i.Children.toArray(t),a=i.useState(0),o=Object(b.a)(a,2),s=o[0],c=o[1],l=i.useState(!1),u=Object(b.a)(l,2),d=u[0],p=u[1],j=r[s];function f(){return s===r.length-1}return Object(fe.jsx)(In.b,Object(m.a)(Object(m.a)({},n),{},{validationSchema:j.props.validationSchema,onSubmit:function(){var e=Object(Q.a)(Z.a.mark((function e(t,i){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==r.length-1){e.next=6;break}return e.next=3,n.onSubmit(t,i);case 3:p(!0),e.next=7;break;case 6:c((function(e){return e+1}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.status;return Object(fe.jsxs)(In.a,{autoComplete:"off",children:[Object(fe.jsx)(Ut.a,{alternativeLabel:!0,activeStep:s,sx:{marginTop:"24px",marginBottom:"24px",alignContent:"center",justifyContent:"center"},children:r.map((function(e,t){return Object(fe.jsx)(Rt.a,{completed:s>t||d,children:Object(fe.jsx)(Wt.a,{children:e.props.label})},e.props.label)}))}),j,Object(fe.jsxs)(Xt.a,{container:!0,spacing:2,sx:{marginTop:"8px",alignContent:"center",justifyContent:"center"},children:[!n&&s>0?Object(fe.jsx)(Xt.a,{item:!0,children:Object(fe.jsx)(U.a,{disabled:t,variant:"contained",color:"primary",size:"large",onClick:function(){return c((function(e){return e-1}))},startIcon:Object(fe.jsx)(wn.a,{}),children:"Voltar"})}):null,!n&&Object(fe.jsx)(Xt.a,{item:!0,children:Object(fe.jsx)(U.a,{startIcon:t?Object(fe.jsx)(Pn.a,{size:"1rem"}):null,disabled:t,variant:"contained",color:"primary",type:"submit",size:"large",endIcon:f()&&!t?Object(fe.jsx)(qn.a,{}):Object(fe.jsx)(Cn.a,{}),children:t?"Submitting":f()?"Enviar":"Pr\xf3ximo"})})]})]})}}))}var Tn=n(150),Rn=n(610);var Wn=n(301),Un=n.n(Wn),Dn=n(300),Bn=n.n(Dn),Ln=n(579),Fn=Object(fe.jsx)(Bn.a,{fontSize:"small"}),Mn=Object(fe.jsx)(Un.a,{fontSize:"small"});var zn=n(124),Vn=n.n(zn);var Gn,Hn,Jn=["label"];!function(e){e.New="S",e.Existent="N",e.Blocked="D"}(Gn||(Gn={})),function(e){e.AddProfile="24",e.ExcludeProfile="25",e.CreateUser="26",e.BlockUser="27",e.UnBlockUser="194"}(Hn||(Hn={}));var Xn=function(){function e(){Object(ne.a)(this,e),this.getSAPTemporyFieldCollection=function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"S",description:"Sim"},{id:"N",description:"N\xe3o"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getSAProfileCollection=function(){var e=Object(Q.a)(Z.a.mark((function e(t,n,r){var i,a,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("searching on ".concat(t)),e.next=3,oe.get("/sap/profiles/search/".concat(t,"?param=").concat(n,"&take=").concat(r));case 3:return i=e.sent,a=i.data,o=a.map((function(e){return{id:e.profile_name,description:e.profile_description}})),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}return Object(re.a)(e,[{key:"getSAPEnvironmentCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"ECC",description:"ECC-Produ\xe7\xe3o"},{id:"BW",description:"BW-Produ\xe7\xe3o"},{id:"BRT",description:"BRT-Teste"},{id:"GRC",description:"GRC-Produ\xe7\xe3o NFP"},{id:"SIGGA",description:"SIGGA-Mobile Manuten\xe7\xe3o"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSAPUserTypeCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("...pegando user types"),t!==Hn.AddProfile){e.next=3;break}return e.abrupt("return",[{id:Gn.New,description:"Novo"},{id:Gn.Existent,description:"Existente"},{id:Gn.Blocked,description:"Desbloqueio"}]);case 3:if(t!==Hn.UnBlockUser){e.next=5;break}return e.abrupt("return",[{id:Gn.Blocked,description:"Desbloqueio"}]);case 5:return e.abrupt("return",[{id:Gn.Existent,description:"Existente"}]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSAPServiceTypeCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Getting service yptes ".concat(t)),t){e.next=3;break}return e.abrupt("return",[{id:Hn.AddProfile,description:"Libera\xe7\xe3o de Perfil"},{id:Hn.ExcludeProfile,description:"Exclus\xe3o de Perfil"},{id:Hn.BlockUser,description:"Bloqueio de Usu\xe1rio"},{id:Hn.UnBlockUser,description:"Desbloqueio de Usu\xe1rio"}]);case 3:if("N"!==t){e.next=5;break}return e.abrupt("return",[{id:Hn.AddProfile,description:"Libera\xe7\xe3o de Perfil"},{id:Hn.ExcludeProfile,description:"Exclus\xe3o de Perfil"},{id:Hn.BlockUser,description:"Bloqueio de Usu\xe1rio"}]);case 5:if("D"!==t){e.next=7;break}return e.abrupt("return",[{id:Hn.AddProfile,description:"Libera\xe7\xe3o de Perfil"},{id:Hn.ExcludeProfile,description:"Exclus\xe3o de Perfil"},{id:Hn.UnBlockUser,description:"Desbloqueio de Usu\xe1rio"}]);case 7:return e.abrupt("return",[{id:Hn.AddProfile,description:"Libera\xe7\xe3o de Perfil"},{id:Hn.ExcludeProfile,description:"Exclus\xe3o de Perfil"}]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSAPProfileTypeCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"1",description:"Outros"},{id:"2",description:"Job Position"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSAPUserIdCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(){var t,n,r,i,a=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"ECC",e.next=3,oe.get("/sap/users/".concat(t));case 3:return n=e.sent,r=n.data,i=r.map((function(e){return{id:e.user_user_id,description:e.user_user_name}})),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getJobPositionCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r,i,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/sap/jobpositions/".concat(t,"/").concat(n));case 2:return r=e.sent,i=r.data,a=i.map((function(e){return{id:e.id,description:e.job_position}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Kn=new Xn;var Yn=["labelWithId","inputProps","name"];function Zn(e){var t=e.labelWithId,n=e.inputProps,r=e.name,i=Object(st.a)(e,Yn),a=Object(In.c)(r),o=Object(b.a)(a,2),s=o[0],c=o[1],l=Object(m.a)(Object(m.a)({},s),i);return c&&c.touched&&c.error&&(l.error=!0,l.helperText=c.error),s.value&&"object"===typeof s.value&&(l.value=t?"".concat(s.value.id,"-").concat(s.value.description):s.value.description),Object(fe.jsx)(Kt.a,Object(m.a)({id:r,defaultValue:l.value,InputProps:n},l))}var Qn,$n,er={InputText:Zn,InputSelect:function(e){var t=e.label,n=e.name,r=e.labelWithId,a=e.optionsPrimaryKey,o=e.onChangeCleanFieldName,s=e.editMode,c=e.defaultOptions,l=e.getOptions,u=Object(In.c)(n),d=Object(b.a)(u,2),p=d[0],f=d[1],h=Object(In.d)(),_=h.setFieldValue,v=h.setTouched,y=i.useState(p.value?r?"".concat(p.value.id,"-").concat(p.value.description):p.value.id:""),x=Object(b.a)(y,2),O=x[0],g=x[1],w=i.useState(!1),k=Object(b.a)(w,2),C=k[0],S=k[1],q=i.useState([]),P=Object(b.a)(q,2),I=P[0],N=P[1],E=C&&0===I.length,A={};return f&&f.touched&&f.error&&(A.error=!0,A.helperText=f.error),i.useEffect((function(){var e=!0;if(E)return Object(Q.a)(Z.a.mark((function t(){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}if(!c){t.next=5;break}N(Object(St.a)(c)),t.next=11;break;case 5:if(!l){t.next=11;break}return t.next=8,l(a);case 8:r=t.sent,N(Object(St.a)(r)),1===r.length&&_(n,r[0]);case 11:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[E]),i.useEffect((function(){C||N([])}),[C]),Object(fe.jsxs)(fe.Fragment,{children:[!s&&Object(fe.jsx)(Zn,{name:n,label:t,fullWidth:!0,labelWithId:r,inputProps:{readOnly:!0}}),s&&Object(fe.jsx)(Ln.a,Object(m.a)(Object(m.a)({id:n,autoComplete:!0},p),{},{inputValue:O,open:C,onOpen:function(){S(!0)},onClose:function(){S(!1)},onBlur:function(){return v(Object(j.a)({},n,!0))},isOptionEqualToValue:function(e,t){return e.id===t.id||e.description.toUpperCase()===t.description.toUpperCase()},getOptionLabel:function(e){return""===e.description?"":r?"".concat(e.id,"-").concat(e.description):e.description},options:I,loading:E,onChange:function(e,t){_(n,t),o&&(console.log("cleaning ".concat(o)),_(o,{id:"",description:""}))},onInputChange:function(e,t){g(t)},renderInput:function(e){return Object(fe.jsx)(Kt.a,Object(m.a)(Object(m.a)({},e),{},{label:t,InputProps:Object(m.a)(Object(m.a)({},e.InputProps),{},{endAdornment:Object(fe.jsxs)(fe.Fragment,{children:[E?Object(fe.jsx)(Pn.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})},A))}}))]})},InputEmployee:function(e){var t=e.label,n=e.name,r=e.helperText,a=e.getOptions,o=e.setLabelOption,s=e.setLabelHintOptions,c=Object(In.c)(n),l=Object(b.a)(c,2),u=l[0],d=l[1],p=Object(In.d)().setFieldValue,j=i.useState(o(u.value)),f=Object(b.a)(j,2),_=f[0],v=f[1],y=i.useState([]),x=Object(b.a)(y,2),O=x[0],g=x[1],w={};d&&d.touched&&d.error&&(w.error=!0,w.helperText=d.error);var k=i.useMemo((function(){return Vn()(function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.input);case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),200)}),[]);return i.useEffect((function(){var e=!0;if(""!==_)return k({input:_},(function(t){if(e){var n=[];t&&(n=[].concat(Object(St.a)(n),Object(St.a)(t))),g(n)}})),function(){e=!1}}),[u.value,_,k]),Object(fe.jsx)(Ln.a,Object(m.a)(Object(m.a)({id:n,getOptionLabel:function(e){return o(e)},filterOptions:function(e){return e},options:O,autoComplete:!0,filterSelectedOptions:!0},u),{},{inputValue:_,onChange:function(e,t){p(n,t),p("request.updateEmployee",!0)},onInputChange:function(e,t){v(t)},renderInput:function(e){return Object(fe.jsx)(Kt.a,Object(m.a)(Object(m.a)({},e),{},{label:t,fullWidth:!0,helperText:r},w))},renderOption:function(e,t){return Object(fe.jsx)("li",Object(m.a)(Object(m.a)({},e),{},{children:Object(fe.jsxs)(Xt.a,{container:!0,alignItems:"center",children:[Object(fe.jsx)(Xt.a,{item:!0,children:Object(fe.jsx)(_t.a,{component:h.a,sx:{color:"text.secondary",mr:2}})}),Object(fe.jsx)(Xt.a,{item:!0,xs:!0,children:Object(fe.jsx)(M.a,{variant:"body2",color:"text.secondary",children:s(t)})})]})}))}}))},InputSAPProfiles:function(e){var t=e.name,n=e.label,r=e.placeHolder,a=e.parentValue,o=e.addToTable,s=e.handleProfileChange,c=e.disabledOptions,l=i.useState([]),u=Object(b.a)(l,2),d=u[0],p=u[1],j=Object(In.c)(t),f=Object(b.a)(j,2),h=f[0],_=f[1],v=Object(In.d)().setFieldValue,y=i.useState(""),x=Object(b.a)(y,2),O=x[0],g=x[1],w={};_&&_.touched&&_.error&&(w.error=!0,w.helperText=_.error);var k=i.useMemo((function(){return Vn()(function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kn.getSAProfileCollection(a,t.input,"20");case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),200)}),[a]);return i.useEffect((function(){var e=!0;if(""!==O)return k({input:O},(function(t){if(e){var n=[];t&&(n=[].concat(Object(St.a)(n),Object(St.a)(t))),p(n)}})),function(){e=!1};p(h.value||[])}),[h.value,O,k]),Object(fe.jsx)(Ln.a,Object(m.a)(Object(m.a)({multiple:!0,id:t},h),{},{inputValue:O,options:d,getOptionLabel:function(e){return"".concat(e.id," - ").concat(e.description)},filterSelectedOptions:!0,onChange:function(e,n){v(t,n),o&&s(n)},onInputChange:function(e,t){g(t)},getOptionDisabled:function(e){return!![].concat(Object(St.a)(h.value),Object(St.a)(c)).find((function(t){return t.id===e.id}))},renderInput:function(e){return Object(fe.jsx)(Kt.a,Object(m.a)(Object(m.a)({},e),{},{label:"".concat(n," ").concat(a),placeholder:r}))}}))},InputDatePicker:function(e){var t=e.label,n=Object(st.a)(e,Jn),r=Object(In.c)(n.name),i=Object(b.a)(r,2),a=i[0],o=i[1],s={};o&&o.touched&&o.error&&(s.error=!0,s.helperText=o.error);var c=Object(m.a)(Object(m.a)(Object(m.a)({},a),n),s);return Object(fe.jsx)(Kt.a,Object(m.a)({label:t,type:"date",sx:{width:180},InputLabelProps:{shrink:!0}},c))},InputAutoComplete:function(e){var t=e.name,n=e.label,r=e.labelWithId,a=e.helperText,o=e.getOptions,s=e.disabledOptions,c=i.useState([]),l=Object(b.a)(c,2),u=l[0],d=l[1],p=Object(In.c)(t),j=Object(b.a)(p,2),f=j[0],_=j[1],v=Object(In.d)().setFieldValue,y=i.useState(""),x=Object(b.a)(y,2),O=x[0],g=x[1],w={};_&&_.touched&&_.error&&(w.error=!0,w.helperText=_.error);var k=function(e){return r?""!==e.id?"".concat(e.id," - ").concat(e.description):"":e.id},C=i.useMemo((function(){return Vn()(function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t.input);case 2:r=e.sent,n(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),200)}),[]);return i.useEffect((function(){var e=!0;if(""!==O&&" - "!==O)return C({input:O},(function(t){if(e){var n=[];f.value&&(n=[f.value]),t&&(n=[].concat(Object(St.a)(n),Object(St.a)(t))),d(n)}})),function(){e=!1};d(f.value?[f.value]:[])}),[f.value,O,C]),Object(fe.jsx)(Ln.a,Object(m.a)(Object(m.a)({id:t},f),{},{inputValue:O,getOptionLabel:k,filterOptions:function(e){return e},options:u,autoComplete:!0,filterSelectedOptions:!0,getOptionDisabled:function(e){return!!(null===s||void 0===s?void 0:s.find((function(t){return t.id===e.id})))},fullWidth:!0,multiple:!1,onChange:function(e,n){d(n?[n].concat(Object(St.a)(u)):u),console.log("chamando o onchange pai"),v(t,n)},onInputChange:function(e,t){g(t)},renderInput:function(e){return Object(fe.jsx)(Kt.a,Object(m.a)(Object(m.a)({},e),{},{label:n,fullWidth:!0,helperText:a},w))},renderOption:function(e,t){return Object(fe.jsx)("li",Object(m.a)(Object(m.a)({},e),{},{children:Object(fe.jsxs)(Xt.a,{container:!0,alignItems:"center",children:[Object(fe.jsx)(Xt.a,{item:!0,children:Object(fe.jsx)(_t.a,{component:h.a,sx:{color:"text.secondary",mr:2}})}),Object(fe.jsx)(Xt.a,{item:!0,xs:!0,children:Object(fe.jsx)(M.a,{variant:"body2",color:"text.secondary",children:k(t)})})]})}))}}))},CheckBoxAutoComplete:function(e){var t=e.name,n=e.labelWithId,r=e.getOptions,a=e.parentValue,o=i.useState(!1),s=Object(b.a)(o,2),c=s[0],l=s[1],u=i.useState([]),d=Object(b.a)(u,2),p=d[0],j=d[1],f=Object(In.c)(t),h=Object(b.a)(f,2),_=h[0],v=h[1],y=Object(In.d)().setFieldValue,x=i.useState(""),O=Object(b.a)(x,2),g=O[0],w=O[1],k={};v&&v.touched&&v.error&&(k.error=!0,k.helperText=v.error);var C=c&&0===p.length;return i.useEffect((function(){var e=!0;if(C)return Object(Q.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}if(""!==a){t.next=6;break}j([]),l(!1),t.next=11;break;case 6:if(!r){t.next=11;break}return t.next=9,r(a||"");case 9:n=t.sent,j(Object(St.a)(n));case 11:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[C]),i.useEffect((function(){c||j([])}),[c]),Object(fe.jsx)(Ln.a,Object(m.a)(Object(m.a)({fullWidth:!0,multiple:!0,id:t,onOpen:function(){l(!0)}},_),{},{onClose:function(){l(!1)},inputValue:g,onInputChange:function(e,t){w(t)},onChange:function(e,n){y(t,Object(St.a)(n))},options:p,isOptionEqualToValue:function(e,t){return n&&e.id===t.id||e.description.toUpperCase()===t.description.toUpperCase()},disableCloseOnSelect:!0,getOptionLabel:function(e){return""===e.description?"":n?"".concat(e.id,"-").concat(e.description):e.description},renderOption:function(e,t,r){var i=r.selected;return Object(fe.jsxs)("li",Object(m.a)(Object(m.a)({},e),{},{children:[Object(fe.jsx)(tn.a,{icon:Fn,checkedIcon:Mn,style:{marginRight:8},checked:i}),n?"".concat(t.id,"-").concat(t.description):t.description]}))},renderInput:function(e){return Object(fe.jsx)(Kt.a,Object(m.a)(Object(m.a)({},e),{},{label:"Rotinas",placeholder:"Rotinas"},k))}}))},CheckBoxAS400Access:function(e){var t=e.name,n=Object(In.c)(t),r=Object(b.a)(n,1)[0],i=Object(In.d)().setFieldValue,a=r.value,o=a.inc,s=a.exc,c=a.alt,l=a.con,u=function(e){var n=e.target.checked,a=Object(m.a)(Object(m.a)({},r.value),{},Object(j.a)({},e.target.name,n));a.inc||a.exc||a.alt||(a.con=!0),i(t,a)};return Object(fe.jsx)(Tn.a,{component:"fieldset",children:Object(fe.jsxs)(Rn.a,{"aria-label":"position",row:!0,children:[Object(fe.jsx)(nn.a,{value:"I",control:Object(fe.jsx)(tn.a,{size:"small",checked:o,onChange:u,name:"inc"}),label:"Inc",labelPlacement:"top",sx:{marginLeft:"4px",marginRight:"4px"}}),Object(fe.jsx)(nn.a,{value:"E",control:Object(fe.jsx)(tn.a,{size:"small",checked:s,onChange:u,name:"exc"}),label:"Exc",labelPlacement:"top",sx:{marginLeft:"4px",marginRight:"4px"}}),Object(fe.jsx)(nn.a,{value:"A",control:Object(fe.jsx)(tn.a,{size:"small",checked:c,onChange:u,name:"alt"}),label:"Alt",labelPlacement:"top",sx:{marginLeft:"4px",marginRight:"4px"}}),Object(fe.jsx)(nn.a,{value:"C",control:Object(fe.jsx)(tn.a,{size:"small",checked:l,onChange:u,name:"con"}),label:"Con",labelPlacement:"top",sx:{marginLeft:"4px",marginRight:"4px"}})]})})}},tr=er;!function(e){e.AddProfile="06",e.ExcludeProfile="20",e.CreateUser="01",e.BlockUser="13",e.CopyUser="193"}(Qn||(Qn={})),function(e){e.New="S",e.Existent="N"}($n||($n={}));var nr=function(){function e(){Object(ne.a)(this,e)}return Object(re.a)(e,[{key:"getAS400ServiceTypeCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:Qn.AddProfile,description:"Libera\xe7\xe3o de Acesso"},{id:Qn.ExcludeProfile,description:"Exclus\xe3o de Acesso"},{id:Qn.CopyUser,description:"Duplica\xe7\xe3o de Acesso"}]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400JobPositionCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/profiles");case 2:return n=e.sent,r=n.data,i=r.map((function(e){return{id:e.profile,description:e.profile}})).sort((function(e,t){return e.id-t.id})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400JobPosition",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/profiles/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400YesNoCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:$n.New,description:"Sim"},{id:$n.Existent,description:"N\xe3o"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400UserTypeCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:$n.New,description:"Sim"},{id:$n.Existent,description:"N\xe3o"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400UsersByNameCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/users/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400EnvironmentCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"BRCOIBB1",description:"Legado Citros Produ\xe7\xe3o"},{id:"BRCOIBB2",description:"Legado Citros Desenvolvimento"},{id:"BRCOISP1",description:"Produ\xe7\xe3o"},{id:"BRCOISP2",description:"Qualidade"},{id:"BRCOISP5",description:"Desenvolvimento"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400SystemCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/systems");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAS400RoutineCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/systems/".concat(t));case 2:return n=e.sent,r=n.data,i=r.routines.map((function(e){var t=e.routine_id,n=e.description,r=e.system_id,i=e.access_type,a=e.access_observation,o=e.limited_access,s=e.restricted_access;return{id:t,description:n,system_id:r,access_type:i.trim(),access_observation:a,limited_access:o,restricted_access:s}})).sort((function(e,t){return e.id-t.id})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanyOnlyCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/companies");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBranchOnlyCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,oe.get("/as400/companies/".concat(t));case 3:return n=e.sent,r=n.data,i=r.branchs.map((function(e){return{id:e.id,description:e.branch_name}})).sort((function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)})),e.abrupt("return",i);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRegionCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/as400/regions");case 2:return n=e.sent,r=n.data,i=r.map((function(e){return{id:e.id,description:e.region_name}})).sort((function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),rr=new nr,ir=n(302),ar=n.n(ir),or=n(147),sr=n.n(or),cr=n(303),lr=n.n(cr),ur=n(304),dr=n.n(ur),pr=[{field:"id",headerName:"ID",width:30},{field:"service_type",headerName:"Serv.",width:100},{field:"environment",headerName:"Ambiente",width:110},{field:"user_id",headerName:"User ID",width:130},{field:"system",headerName:"Sistema",width:130},{field:"routine",headerName:"Rotina",width:130},{field:"security_type",headerName:"Tipo Seg.",width:130},{field:"company",headerName:"empresa",minWidth:130,valueGetter:function(e){return"EF"===e.getValue(e.id,"security_type")?"".concat(e.getValue(e.id,"security_company")||""):"--"}},{field:"branch",headerName:"Filial",minWidth:130,valueGetter:function(e){return"EF"===e.getValue(e.id,"security_type")?"".concat(e.getValue(e.id,"security_branchs")||""):"--"}},{field:"region",headerName:"Regi\xe3o",minWidth:130,valueGetter:function(e){return"R"===e.getValue(e.id,"security_type")?"".concat(e.getValue(e.id,"security_regions")||""):"--"}},{field:"access",headerName:"Acesso",width:130},{field:"removeprofileaction",headerName:"",renderCell:function(){return Object(fe.jsx)(U.a,{variant:"contained",color:"error",startIcon:Object(fe.jsx)(sr.a,{})})}}];function br(e){var t=e.selectionModel,n=e.removeProfile,r=e.updateProfile,a=e.addProfiles,o=Object(In.d)(),s=o.values,c=o.setFieldValue,l=function(e){return!!e&&(""!==e.id&&""!==e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Access",n=t.map((function(e){return parseInt(e.toString(),10)})),i=s.as400,a=i.company,o=i.branch,c=i.region,u=i.access;n&&("Security"===e?l(a)&&l(o)&&l(c)?r(n,a.id,[o.id],[c.id]):window.alert("Informe a empresa, filial e regi\xe3o"):r(n,void 0,void 0,void 0,u))};return i.useEffect((function(){console.log("mudou a empresa"),c("as400.branch",{id:"",description:""})}),[s.as400.company]),Object(fe.jsx)(Ct.b,{children:Object(fe.jsx)(Xt.a,{container:!0,justifyContent:"space-between",spacing:2,children:Object(fe.jsx)(Xt.a,{item:!0,xs:12,children:Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.company",label:"Empresa",labelWithId:!0,getOptions:rr.getCompanyOnlyCollection,editMode:!0})}),Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputSelect,{label:"Filial",name:"as400.branch",labelWithId:!0,getOptions:rr.getBranchOnlyCollection,optionsPrimaryKey:s.as400.company.id,editMode:!0})}),Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.region",label:"Regi\xe3o",labelWithId:!0,getOptions:rr.getRegionCollection,editMode:!0})}),Object(fe.jsxs)(Xt.a,{item:!0,sx:{paddingLeft:"20px"},children:[Object(fe.jsx)(tr.CheckBoxAS400Access,{name:"as400.access"}),Object(fe.jsx)(U.a,{onClick:function(){!function(){var e=s.as400,t=e.company,n=e.branch,r=e.region,i=e.access;l(t)&&l(n)&&l(r)?a(t.id,[n.id],[r.id],i):window.alert("Informe a empresa, filial e regi\xe3o")}()},variant:"contained",startIcon:Object(fe.jsx)(ar.a,{}),children:"Adicionar"}),Object(fe.jsx)(U.a,{onClick:function(){u("Security")},variant:"contained",startIcon:Object(fe.jsx)(lr.a,{}),children:"Seguran\xe7a"}),Object(fe.jsx)(U.a,{onClick:function(){u()},variant:"contained",startIcon:Object(fe.jsx)(dr.a,{}),children:"Acesso"}),Object(fe.jsx)(U.a,{onClick:function(){!function(){var e=t.map((function(e){return parseInt(e.toString(),10)}));n(e)}()},variant:"contained",startIcon:Object(fe.jsx)(sr.a,{}),children:"Remover"})]})]})})})})}function mr(e){var t=e.rows,n=e.removeProfile,r=e.updateProfile,a=e.addProfiles,o=i.useState([]),s=Object(b.a)(o,2),c=s[0],l=s[1];return Object(fe.jsx)("div",{style:{height:450,width:"100%"},children:Object(fe.jsx)(Ct.a,{rows:t,columns:pr,pageSize:100,rowsPerPageOptions:[5,10,30],checkboxSelection:!0,onCellClick:function(e){if("removeprofileaction"===e.colDef.field){var t=e.getValue(e.id,"id");t&&n([parseInt(t.toString(),10)])}return""},onSelectionModelChange:function(e){l(e)},selectionModel:c,components:{Toolbar:br},componentsProps:{toolbar:{selectionModel:c,removeProfile:n,updateProfile:r,addProfiles:a}}})})}function jr(){var e,t,n,r,i,o,s,c,l=Object(In.d)(),u=l.values,d=l.setFieldValue,p=u.as400,b=function(e){var t=e.inc?"S":"N",n=e.exc?"S":"N",r=e.alt?"S":"N";return"".concat(t," ").concat(n," ").concat(r)},m=function(){var e=Object(Q.a)(Z.a.mark((function e(t,n,r){var i,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr.getAS400JobPosition(p.job_position.id);case 2:i=e.sent,a=i.map((function(e,i){return{id:i,service_type:p.service_type.id,environment:p.environment.id,user_id:p.user_id.id,system:e.system_id,routine:e.routine_id,security_type:e.access_type,security_company:"XX"===e.company?t:e.company,security_branchs:"XXX"===e.branch?n:e.branch,security_regions:"XXX"===e.region?r:"",security_text:"",job_position:p.job_position.id,access:"".concat(e.inc).concat(e.exc).concat(e.alt)}})),console.log("new array"),console.log(a),d("as400.table",Object(St.a)(a));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return a.a.useEffect((function(){var e;(null===(e=p.service_type)||void 0===e?void 0:e.id)===Qn.ExcludeProfile&&d("as400.user_type",{id:"N",description:"N\xe3o"})}),[p.service_type]),a.a.useEffect((function(){d("as400.branch",{id:"",description:""})}),[p.company]),a.a.useEffect((function(){var e,t;"S"===(null===(e=p.user_type)||void 0===e?void 0:e.id)?d("as400.user_id",{id:"NovoUsuario",description:"Novo Usu\xe1rio"}):"NovoUsuario"===(null===(t=p.user_id)||void 0===t?void 0:t.id)&&d("as400.user_id",{id:"",description:""})}),[p.user_type]),Object(fe.jsxs)(Xt.a,{container:!0,justifyContent:"space-between",spacing:2,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.service_type",label:"Servi\xe7o AS400",getOptions:rr.getAS400ServiceTypeCollection,labelWithId:!0,editMode:!0})}),Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.environment",label:"Ambiente",labelWithId:!0,getOptions:rr.getAS400EnvironmentCollection,editMode:!0})}),Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.user_type",label:"Novo Usu\xe1rio",getOptions:rr.getAS400UserTypeCollection,labelWithId:!1,editMode:!0})})]}),(null===p||void 0===p||null===(e=p.service_type)||void 0===e?void 0:e.id)!==Qn.CopyUser&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.is_job_position",label:"Indicar Perfil",getOptions:rr.getAS400YesNoCollection,labelWithId:!1,editMode:!0})}),"S"===(null===(t=p.is_job_position)||void 0===t?void 0:t.id)&&Object(fe.jsx)(Xt.a,{item:!0,xs:10,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.job_position",label:"Perfil",getOptions:rr.getAS400JobPositionCollection,labelWithId:!1,editMode:!0})}),"N"===(null===(n=p.is_job_position)||void 0===n?void 0:n.id)&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Xt.a,{item:!0,xs:10,children:Object(fe.jsx)(tr.InputSelect,{name:"as400.system",label:"Sistema",getOptions:rr.getAS400SystemCollection,labelWithId:!0,editMode:!0})})})]})})]}),Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:["S"!==(null===p||void 0===p||null===(r=p.user_type)||void 0===r?void 0:r.id)&&Object(fe.jsx)(tr.InputAutoComplete,{label:"User Id",getOptions:rr.getAS400UsersByNameCollection,name:"as400.user_id",labelWithId:!0,helperText:""}),"S"===(null===p||void 0===p||null===(i=p.user_type)||void 0===i?void 0:i.id)&&Object(fe.jsx)(tr.InputText,{name:"as400.user_id",label:"User Id",fullWidth:!0,inputProps:{readOnly:!0}})]}),(null===(o=p.service_type)||void 0===o?void 0:o.id)===Qn.CopyUser&&Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputAutoComplete,{name:"as400.user_id_source",label:"User Id Origem",labelWithId:!0,getOptions:rr.getAS400UsersByNameCollection,helperText:"",disabledOptions:[p.user_id]})})]}),(null===(s=p.service_type)||void 0===s?void 0:s.id)!==Qn.CopyUser&&"N"===(null===(c=p.is_job_position)||void 0===c?void 0:c.id)&&Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:11,children:Object(fe.jsx)(tr.CheckBoxAutoComplete,{label:"Rotina",getOptions:rr.getAS400RoutineCollection,name:"as400.routines",labelWithId:!0,helperText:"",parentValue:p.system.id})})})]}),(null===p||void 0===p?void 0:p.service_type)&&p.service_type.id!==Qn.CopyUser&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Xt.a,{item:!0,xs:12,children:Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:12,children:Object(fe.jsx)(mr,{rows:p.table,removeProfile:function(e){var t=p.table.filter((function(t){return e.indexOf(t.id)<0}));t.map((function(e,t){return e.id=t+1,e})),d("as400.table",Object(St.a)(t))},updateProfile:function(e,t,n,r,i){var a=p.table;a&&(console.log(e),console.log(a),e.forEach((function(e){console.log(e);var o=e-1;a[o].security_company=t||a[o].security_company,a[o].security_branchs=n||a[o].security_branchs,a[o].security_regions=r||a[o].security_regions,a[o].access=i?b(i):a[o].access}))),d("as400.table",a)},addProfiles:function(e,t,n,r){var i=p.service_type,a=p.environment,o=p.user_id,s=p.system,c=p.routines;if("S"===p.is_job_position.id)m(e,t,n);else{var l=null===c||void 0===c?void 0:c.map((function(c){return{id:0,service_type:i.id,environment:a.id,user_id:o.id,system:s.id,routine:c.id,security_type:c.access_type,security_company:e,security_branchs:t,security_regions:n,security_text:c.access_observation?c.access_observation:"",job_position:"",access:b(r)}})),u=[].concat(Object(St.a)(p.table),Object(St.a)(l));console.log(u);var j=Array.from(u.reduce((function(e,t){return e.set("".concat(t.system).concat(t.routine).concat(t.security_company).concat(t.security_branchs),t)}),new Map).values());j.sort((function(e,t){return e.routine-t.routine}));var f=j.map((function(e,t){return e.id=t+1,e}));d("as400.table",Object(St.a)(f))}}})})})})})]})}var fr=n(583),hr=n(573),_r=a.a.forwardRef((function(e,t){return Object(fe.jsx)(fr.a,Object(m.a)({elevation:6,ref:t,variant:"filled"},e))}));function vr(){var e=Object(In.d)(),t=e.values,n=e.setFieldValue,r=e.status,i=t.request,o=t.as400;a.a.useEffect((function(){var e=function(){var e,t={requested_by_id:i.request_by?i.request_by:"",requested_by_name:i.request_by?i.request_by:"",requested_by_email:i.request_by?i.request_by:"",request_number:"",request_status:-1,request_type:"AS400",request_observation:i.request_observation,request_copy_list:"falta",employee_id:i.employee.id,employee_fullname:i.employee.description,employee_email:i.employee.email?i.employee.email:"",employee_type:i.employee_type?i.employee_type.id:"",employee_type_description:i.employee_type?i.employee_type.description:"",employee_profile_edition_rule:i.employee_profile_edition_rule,employee_role_id:i.employee_role?i.employee_role.id:"",employee_role_description:i.employee_role?i.employee_role.description:"",employee_plataform_id:i.employee_plataform?i.employee_plataform.id:"",employee_plataform_description:i.employee_plataform?i.employee_plataform.description:"",employee_costcenter_id:i.employee_costcenter?i.employee_costcenter.id:"",employee_costcenter_description:i.employee_costcenter?i.employee_costcenter.description:"",employee_company_id:i.employee_company?i.employee_company.id:"",employee_company_description:i.employee_company?i.employee_company.description:"",employee_branch_id:i.employee_branch?i.employee_branch.id:"",employee_branch_description:i.employee_branch?i.employee_branch.description:"",employe_manager_id:i.employee_manager?i.employee_manager.id:"",employee_manager_name:i.employee_manager?i.employee_manager.description:"",employee_login:i.employee_userid_login?i.employee_userid_login:"",employee_sap_id:i.employee_userid_sap?i.employee_userid_sap:"",employee_userid_sap_status:i.employee_userid_sap_status?i.employee_userid_sap_status:"",employee_userid_sap_expiration_date:i.employee_userid_sap_status?i.employee_userid_sap_status:"",employee_as400_id:"",employee_userid_as400_description:"",updateEmployee:!!i.updateEmployee&&i.updateEmployee},n={service_id:"",service_description:"",environment:"",is_new_user:!1,user_id:"",reused_user_id_license:"",observation:"",copy_user_id:"",copy_user_id_status:"-1"};if(o.service_type.id===Qn.CopyUser)return n.environment=o.environment.id,n.is_new_user="S"===o.user_type.id,n.user_id=o.user_id.id,n.reused_user_id_license=o.user_licence,n.observation="",n.copy_user_id=o.user_id_source.id,n.copy_user_id_status="",n.service_id=Qn.CopyUser,n.service_description="Duplica\xe7\xe3o de Acesso",{employee:t,user:n};"S"===o.user_type.id&&(n.environment=o.environment.id,n.is_new_user=!0,n.user_id=o.user_id.id,n.reused_user_id_license=o.user_licence,n.observation="",n.service_id=Qn.CreateUser,n.service_description="Cria\xe7\xe3o de Usu\xe1rio");var r=null===(e=o.table)||void 0===e?void 0:e.map((function(e){return{service_id:e.service_type,service_description:e.service_type===Qn.AddProfile?"Libera\xe7\xe3o de Acesso":"Exclus\xe3o de Acesso",environment:e.environment,is_new_user:n.is_new_user,user_id:e.user_id,system:e.system,routine:e.routine,access_type:e.security_type,access_observation:e.security_text,limited_access:!1,restricted_access:!1,access:e.access,company_id:"EF"===e.security_type?e.security_company:"",company_name:"EF"===e.security_type?e.security_company:"",branch_id:"EF"===e.security_type?e.security_branchs[0]:"",branch_name:"",region_id:"R"===e.security_type?e.security_regions[0]:"",region_name:"",job_position:e.job_position}}));return""===n.service_id?{employee:t,profiles:r}:{employee:t,user:n,profiles:r}}();n("data",e)}),[]);var s=Object(In.c)("data"),c=Object(b.a)(s,1)[0],l=c.value?[c.value.user].concat(Object(St.a)(c.value.profiles)):[];return Object(fe.jsxs)(hr.a,{spacing:2,sx:{width:"100%",marginTop:"120px",alignContent:"center",justifyContent:"center",alignItems:"center"},children:[!r&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(_r,{severity:"info",children:"Clique em enviar para registrar sua solicita\xe7\xe3o"}),c.value&&Object(fe.jsx)(Jt,{rows:l.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{id:t})}))})]}),r&&(null===r||void 0===r?void 0:r.isError)&&Object(fe.jsx)(_r,{severity:"error",children:r.error}),r&&!(null===r||void 0===r?void 0:r.isError)&&Object(fe.jsxs)(_r,{severity:"success",children:["Solicita\xe7\xe3o criada com sucesso: ",r.data.request_number]})]})}var yr=function(){function e(){Object(ne.a)(this,e)}return Object(re.a)(e,[{key:"getCompanyCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/companies");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanyOnlyCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/companies");case 2:return n=e.sent,r=n.data,i=r.map((function(e){return{id:e.id,description:e.description}})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCompanyBranchCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/companies");case 2:if(n=e.sent,r=n.data,!(i=r.filter((function(e){return e.id===t})))[0]){e.next=7;break}return e.abrupt("return",i[0].branchs);case 7:return e.abrupt("return",[{id:"",description:""}]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRoleCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/roles?fieldoptions=S&orderby=description");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlataformCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/plataforms?fieldoptions=S&orderby=description");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCostCenterCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/costcenters?fieldoptions=S&orderby=description");case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmployeeTypeCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{id:"Funcion\xe1rio",description:"Funcion\xe1rio"},{id:"Terceiro",description:"Terceiro"},{id:"Rob\xf4 RCA",description:"Rob\xf4 RCA"},{id:"Outros",description:"Outros"}],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmployeeByNameCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/name/".concat(t));case 2:return n=e.sent,r=n.data,i=r.map((function(e){return{id:e.employee_id,description:e.employee_fullname,email:e.employee_email}})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getManagerCollection",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/managers?fieldoptions=S&orderby=full_name");case 2:return n=e.sent,r=n.data,i=r.map((function(e){return{id:e.id,description:e.full_name}})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEmployeeById",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.get("/employees/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setEmployeeNameOption",value:function(e){return e?e.description:""}},{key:"setEmployeeHintNameOptions",value:function(e){return e&&e?"".concat(e.description," ( ").concat(e.email,")"):""}},{key:"setEmployeeEmailOption",value:function(e){return e&&e.email?e.email:""}},{key:"setEmployeeHintEmailOptions",value:function(e){return e&&e?"".concat(e.email," ( ").concat(e.description,")"):""}},{key:"getEmployeeValues",value:function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n,r,i,a,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={is_contingency:!1,employee_profile_edition_rule:"ALL",employee_role:null,employee_plataform:null,employee_costcenter:null,request_category:null,employee_type:null,employee_manager:null,employee_company:null,employee_branch:null,employee:{id:"",description:"",email:""},updateEmployee:!1,has_sap_job_positions:!1,employee_sap_job_positions:[],employee_userid_login:"",employee_userid_as400:{id:"",description:""},employee_userid_sap:"",employee_userid_sap_status:"",employee_userid_sap_expiration_date:""},t){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,oe.get("/employees/".concat(t));case 5:if(r=e.sent,!(i=r.data)){e.next=19;break}if(a={is_contingency:i.is_contingency,updateEmployee:!1,employee:{id:i.employee_id,description:i.employee_fullname,email:i.employee_email},employee_profile_edition_rule:i.employee_profile_edition_rule,employee_type:i.employee_type?{id:i.employee_type,description:i.employee_type}:null,employee_manager:i.manager?{id:i.manager.id,description:i.manager.fullname}:null,employee_role:i.role?{id:i.role.id,description:i.role.description}:null,employee_plataform:i.plataform?{id:i.plataform.id,description:i.plataform.description}:null,employee_costcenter:i.costCenter?{id:i.costCenter.id,description:i.costCenter.description}:null,employee_company:i.company?{id:i.company.id,description:i.company.description}:null,employee_branch:i.branch?{id:i.branch.id,description:i.branch.description}:null,employee_userid_login:i.employee_login,employee_userid_as400:i.as400User?{id:i.as400User.id,description:i.as400User.user_name}:{id:"",description:""},employee_userid_sap:i.employee_sap_id,employee_userid_sap_status:i.employee_sap_id_status,employee_userid_sap_expiration_date:i.employee_sap_id_expiration_date,employee_sap_job_positions:[],has_sap_job_positions:!1},console.log("procurando jobpositions"),!i.costCenter||!i.manager){e.next=18;break}return e.next=13,Kn.getJobPositionCollection(i.manager.id,i.costCenter.id);case 13:o=e.sent,console.log("pegou jobpostions"),console.log(o),a.employee_sap_job_positions=o,a.has_sap_job_positions=!!o[0];case 18:return e.abrupt("return",a);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xr=new yr;function Or(){var e=Object(In.d)(),t=e.values,n=e.setValues,r=t.request,i=function(){var e=r.employee_profile_edition_rule;return"ALL"===e||(!!r.is_contingency||"NONE"!==e&&"ERROR"===e)};return a.a.useEffect((function(){function e(){return e=Object(Q.a)(Z.a.mark((function e(r){var i,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading new values ".concat(r)),e.next=3,xr.getEmployeeValues(r);case 3:i=e.sent,console.log(i),a=Object(m.a)(Object(m.a)({},t),{},{request:Object(m.a)(Object(m.a)({},t.request),i)}),n(a,!0);case 7:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}var i=r.employee?r.employee.id:"";r.updateEmployee&&function(t){e.apply(this,arguments)}(i)}),[r.updateEmployee]),Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(Xt.a,{container:!0,justifyContent:"space-between",spacing:2,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:8,children:[Object(fe.jsx)(tr.InputText,{name:"request.request_by",label:"Solicitante",fullWidth:!0,inputProps:{readOnly:!0}}),Object(fe.jsx)(tr.InputEmployee,{name:"request.employee",label:"Colaborador",labelWithId:!1,helperText:"Digite o nome do colaborador",getOptions:xr.getEmployeeByNameCollection,setLabelOption:xr.setEmployeeNameOption,setLabelHintOptions:xr.setEmployeeHintNameOptions})]}),Object(fe.jsxs)(Xt.a,{item:!0,xs:4,children:[Object(fe.jsx)(tr.InputText,{name:"request.request_date",label:"Data da solicita\xe7\xe3o",fullWidth:!1,inputProps:{readOnly:!0}}),Object(fe.jsx)(tr.InputSelect,{name:"request.employee_type",label:"Tipo",getOptions:xr.getEmployeeTypeCollection,labelWithId:!1,editMode:i()})]})]}),Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputSelect,{name:"request.employee_role",label:"Cargo",labelWithId:!0,getOptions:xr.getRoleCollection,editMode:i()})}),Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputSelect,{name:"request.employee_costcenter",label:"Centro de Custo",labelWithId:!0,getOptions:xr.getCostCenterCollection,editMode:i()})})]}),Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputSelect,{name:"request.employee_manager",label:"Gestor",labelWithId:!1,getOptions:xr.getManagerCollection,editMode:function(){var e=r.employee_profile_edition_rule;return"ALL"===e||("MANAGER"===e||(!!r.is_contingency||"ERROR"===e))}()})})})]}),Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsxs)(Xt.a,{item:!0,xs:12,children:[Object(fe.jsx)(tr.InputText,{name:"request.request_number",label:"N\xfamero",fullWidth:!1,inputProps:{readOnly:!0}}),Object(fe.jsx)(tr.InputText,{name:"request.request_status",label:"Status",fullWidth:!1,inputProps:{readOnly:!0}})]})}),Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputEmployee,{name:"request.employee",label:"Email",getOptions:xr.getEmployeeByNameCollection,labelWithId:!1,helperText:"Digite um email",setLabelOption:xr.setEmployeeEmailOption,setLabelHintOptions:xr.setEmployeeHintEmailOptions})}),Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(tr.InputSelect,{name:"request.employee_plataform",label:"Plataforma",labelWithId:!1,getOptions:xr.getPlataformCollection,editMode:i()})})]}),Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(tr.InputSelect,{name:"request.employee_company",label:"Empresa",labelWithId:!0,getOptions:xr.getCompanyOnlyCollection,onChangeCleanFieldName:"employee_branch",editMode:i()})}),Object(fe.jsx)(Xt.a,{item:!0,xs:7,children:Object(fe.jsx)(tr.InputSelect,{name:"request.employee_branch",label:"Filial",labelWithId:!0,getOptions:xr.getCompanyBranchCollection,optionsPrimaryKey:r.employee_company?r.employee_company.id:void 0,editMode:i()})})]}),Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:11,children:Object(fe.jsx)(tr.InputText,{name:"request.request_observation",label:"Observa\xe7\xe3o",multiline:!0,maxRows:4,fullWidth:!0,inputProps:{readOnly:!1}})})})]})]})})}var gr=n(14),wr=gr.f().shape({id:gr.g().default("").ensure(),description:gr.g().default("").ensure()}).default({id:"",description:""}),kr=function(e,t){return wr.test(e,t,(function(e){return!!e&&!!e.id}))},Cr=gr.f().shape({id:gr.g().default(""),description:gr.g().default("")}).default({id:"",description:""}),Sr={id:"0",request_by:"Darcio Santos",request_status:"Rascunho",request_date:new Date,request_number:"--",request_opentab:0,request_observation:"",is_contingency:!1,employee_profile_edition_rule:"ALL",employee_role:{id:"",description:""},employee_plataform:{id:"",description:""},employee_costcenter:{id:"",description:""},request_category:{id:"",description:""},employee_type:{id:"",description:""},employee_manager:{id:"",description:""},employee_company:{id:"",description:""},employee_branch:{id:"",description:""},employee:{id:"",description:"",email:""},updateEmployee:!1,has_sap_job_positions:!1,employee_sap_job_positions:[],employee_userid_login:"",employee_userid_as400:{id:"",description:""},employee_userid_sap:"",employee_userid_sap_status:"",employee_userid_sap_expiration_date:""},qr={request:Sr,sap:{environment:{id:"ECC",description:"ECC-Produ\xe7\xe3o"},service_type:{id:"",description:""},user_type:{id:"",description:""},user_id:{id:"",description:""},user_licence:"",is_job_position:!1,job_position:{id:"",description:""},is_temporary:{id:"",description:""},profile_type:{id:"",description:""},profile_start_date:"",profile_end_date:"",profiles:[],profiles_table:[]}},Pr={request:Sr,as400:{environment:{id:"BRCOISP1",description:"Produ\xe7\xe3o"},service_type:{id:"",description:""},user_type:{id:"N",description:"N\xe3o"},user_licence:"",user_id:{id:"",description:""},user_id_source:{id:"",description:""},is_job_position:{id:"N",description:"N\xe3o"},job_position:{id:"",description:""},system:{id:"",description:""},routines:[],company:{id:"",description:""},branch:{id:"",description:""},region:{id:"",description:""},access:{inc:!0,exc:!0,alt:!0,con:!0},table:[]}},Ir=gr.f().shape({id:gr.g().required("Campo obrigat\xf3rio"),request_by:gr.g().default("").optional(),request_status:gr.g().default("").optional(),request_date:gr.c().optional(),request_number:gr.g().required(),request_opentab:gr.e().required(),request_observation:gr.g().default("").optional(),request_category:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().optional(),is_contingency:gr.b().required(""),employee_profile_edition_rule:gr.g().required(""),employee_role:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("employee_role","Selecione um cargo",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee_plataform:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("employee_plataform","Selecione uma plataforma",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee_costcenter:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("employee_costcenter","Selecione um centro de custo",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee_type:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("employee_type","Selecione um tipo de colaborador",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee_manager:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("manager","Please select a manager",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee_company:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("employee_company","Selecione uma empresa",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee_branch:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().test("employee_branch","Selecione uma filial",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),employee:gr.f().shape({id:gr.g(),description:gr.g(),email:gr.g()}).nullable().test("employee","Selecione um colaborador",(function(e){return!!(null===e||void 0===e?void 0:e.id)})),updateEmployee:gr.b(),has_sap_job_positions:gr.b().default(!1),employee_sap_job_positions:gr.a().optional().nullable(),employee_userid_login:gr.g().optional().nullable(),employee_userid_sap:gr.g().default("").optional(),employee_userid_sap_status:gr.g().default("").optional(),employee_userid_sap_expiration_date:gr.g().default("").optional(),employee_userid_as400:gr.f().shape({id:gr.g(),description:gr.g()}).nullable().optional()}),Nr=gr.f().shape({environment:kr("environment","Please select a SAP environment").nullable(),service_type:kr("service_type","Please select a service type").nullable(),user_type:kr("user_type","Please select a user type").nullable(),user_id:kr("user_id","Please select a user id").nullable(),user_licence:gr.g().default("").when(["environment","user_type"],(function(e,t){return"ECC"===(null===e||void 0===e?void 0:e.id)&&"S"===t.id?gr.g().required("Camo obrigat\xf3rio").test("user_licencse","digite uma licen\xe7a",(function(e){return""!==e})):gr.g().optional()})),is_job_position:gr.b().default(!1).optional(),profile_type:kr("profile_type","Defina o tipo de perfil"),job_position:Cr.when("profile_type",(function(e){return"1"!==e.id?Cr.test("usertype","Please select the jobposition type",(function(e){return!!e&&!!e.id})):Cr.optional()})),is_temporary:kr("is_temporary","Campo Obrigat\xf3rio").nullable(),profile_start_date:gr.g().default("").when(["service_type","is_temporary"],(function(e,t){return"S"===(null===t||void 0===t?void 0:t.id)&&"24"===e.id?(console.log("testando"),gr.g().test("profile_start_date","Please select the initial date",(function(e){return console.log(e),!!e&&""!==e}))):gr.g().optional()})),profile_end_date:gr.d().when(["service_type","is_temporary"],(function(e,t){return"S"===(null===t||void 0===t?void 0:t.id)&&"24"===e.id?gr.g().test("profile_start_date","Please select the initial date",(function(e){return console.log(e),!!e&&""!==e})):gr.g().optional()})),profiles:gr.a().notRequired(),profiles_table:gr.a().notRequired()}),Er=gr.f().shape({environment:kr("environment","Campo obrigat\xf3rio").nullable(),service_type:kr("service_type","Campo Obrigat\xf3rio").nullable(),user_type:kr("user_type","Campo Obrigat\xf3rio").nullable(),user_id:kr("user_id","Campo Obrigat\xf3rio").nullable(),user_licence:gr.g().default("").optional(),user_id_source:Cr.when("service_type",(function(e){return"193"===(null===e||void 0===e?void 0:e.id)?(console.log("Validando"),kr("user_id_source","Selecione um usu\xe1rio base")):Cr.optional()})),is_job_position:kr("is_job_position","Campo obrigat\xf3rio").nullable(),job_position:Cr.when("is_job_position",(function(e){return"S"===e.id?Cr.test("usertype","Selecione um perfil",(function(e){return!!e&&!!e.id})):Cr.optional()})),system:Cr.required(),routines:gr.a().default([]).notRequired(),company:Cr.optional(),branch:Cr.optional(),region:Cr.optional(),access:Cr.optional(),table:gr.a(gr.f({id:gr.e().default(0).optional(),service_type:gr.g().default("").optional(),environment:gr.g().default("").optional(),user_id:gr.g().default("").optional(),system:gr.g().default("").optional(),routine:gr.g().default("").optional(),security_type:gr.g().default("").optional(),security_company:gr.g().default("").optional(),security_branchs:gr.a().default([]).optional(),security_regions:gr.a().default([]).optional(),security_text:gr.g().default("").optional(),job_position:Cr.optional(),access:gr.g().default("").optional(),inc:gr.b().default(!1).optional(),exc:gr.b().default(!1).optional(),alt:gr.b().default(!1).optional(),con:gr.b().default(!1).optional()})).default([]).when("service_type",(function(e){return"06"===(null===e||void 0===e?void 0:e.id)||"20"===(null===e||void 0===e?void 0:e.id)?gr.a().min(1,"Indique ao menos uma transa\xe7\xe3o"):gr.a().optional()}))}),Ar=gr.f().shape({request:Ir}),Tr=gr.f().shape({sap:Nr}),Rr=gr.f().shape({as400:Er}),Wr=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function Ur(){return Object(fe.jsx)(_t.a,{sx:{marginTop:"4px","& .MuiTextField-root":{m:1,minWidth:"30px"},"& .MuiInputBase-root":{m:1,minWidth:"30px"},"& .MuiDataGrid-root":{m:1,minWidth:"30px"}},children:Object(fe.jsxs)(An,{initialValues:Object(m.a)({},Pr),onSubmit:function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r,i,a,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wr(3e3);case 3:return console.log("values",t.data),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.data)},e.next=7,fetch("".concat("http://localhost:3333","/requests/as400"),r);case 7:return i=e.sent,e.next=10,i.json();case 10:a=e.sent,i.ok?n.setStatus({isError:!1,data:a}):(o=a&&a.message||i.status,n.setStatus({isError:!0,error:o})),n.setSubmitting(!1),console.log(a),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),children:[Object(fe.jsx)(En,{label:"dados do colaborador",validationSchema:Ar,children:Object(fe.jsx)(Or,{})}),Object(fe.jsx)(En,{label:"servi\xe7o AS400",validationSchema:Rr,children:Object(fe.jsx)(jr,{})}),Object(fe.jsx)(En,{label:"Fim",children:Object(fe.jsx)(vr,{})})]})})}var Dr=[{field:"id",headerName:"ID",width:30},{field:"environment",headerName:"Ambiente",width:90},{field:"service_id",headerName:"Tipo Servi\xe7o",width:130},{field:"user_id",headerName:"User ID",width:130},{field:"profile_type",headerName:"Tipo Perfil",width:90},{field:"is_temporary",headerName:"Tempor\xe1rio",sortable:!0,width:30},{field:"profile",headerName:"Perfil",sortable:!0,width:400},{field:"profile_description",headerName:"Descri\xe7\xe3o",sortable:!0,width:400},{field:"removeprofileaction",headerName:"",renderCell:function(){return Object(fe.jsx)(U.a,{variant:"contained",color:"error",startIcon:Object(fe.jsx)(sr.a,{})})}}];function Br(e){var t=e.rows,n=e.removeProfile;return Object(fe.jsx)("div",{style:{height:400,width:"100%"},children:Object(fe.jsx)(Ct.a,{rows:t,columns:Dr,pageSize:100,rowsPerPageOptions:[5,10,30],checkboxSelection:!1,onCellClick:function(e){if("removeprofileaction"===e.colDef.field){var t=e.getValue(e.id,"id");t&&n(parseInt(t.toString(),10))}return""}})})}function Lr(){var e,t,n,r,i,o,s,c,l,u,d,p,b=Object(In.d)(),m=b.values,j=b.setFieldValue,f=b.isValid,h=m.request,_=m.sap;return a.a.useEffect((function(){if(!h.updateEmployee){var e,t,n=h.employee_userid_sap,r={id:"",description:""},i={id:"",description:""},a={id:"",description:""};if("ECC"===(null===_||void 0===_||null===(e=_.environment)||void 0===e?void 0:e.id))console.log("environement = ECC"),(null===(t=h.employee)||void 0===t?void 0:t.id)&&n?(a.id=h.employee_userid_sap||"",a.description=h.employee.description||"",r.id="Ativo"===h.employee_userid_sap_status?"N":"D",r.description="Ativo"===h.employee_userid_sap_status?"Existente":"Desbloqueio"):(r.id="S",r.description="Novo Usu\xe1rio",i.id="",i.description="",a.id="NovoUsuario",a.description="Novo Usu\xe1rio");else r.id="",r.description="",a.id=h.employee_userid_sap||"",a.description=h.employee.description||"";j("sap.user_type",r),j("sap.service_type",i),j("sap.user_id",a),j("sap.profile_type",{id:"1",description:"Outros"}),j("sap.is_temporary",{id:"N",description:"N\xe3o"}),j("sap.profiles",[]),j("sap.profiles_table",[])}}),[null===_||void 0===_?void 0:_.environment,h.updateEmployee]),a.a.useEffect((function(){var e;if("ECC"!==(null===_||void 0===_||null===(e=_.environment)||void 0===e?void 0:e.id)){var t,n={id:"",description:""};"S"===(null===_||void 0===_||null===(t=_.user_type)||void 0===t?void 0:t.id)?(n.description="Novo Usu\xe1rio",n.id="NovoUsuario"):(n.id=h.employee_userid_sap||"",n.description=h.employee.description||""),j("sap.user_id",n),j("sap.profiles",[]),j("sap.profiles_table",[])}}),[null===_||void 0===_?void 0:_.user_type]),a.a.useEffect((function(){j("sap.profiles",[])}),[null===_||void 0===_?void 0:_.service_type]),Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(Xt.a,{container:!0,justifyContent:"space-between",spacing:2,children:[Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.environment",label:"Ambiente SAP",labelWithId:!1,getOptions:Kn.getSAPEnvironmentCollection,editMode:!0})}),Object(fe.jsx)(Xt.a,{item:!0,xs:8,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.service_type",label:"Tipo Servi\xe7o",labelWithId:!0,getOptions:Kn.getSAPServiceTypeCollection,optionsPrimaryKey:_&&_.environment&&_.user_type&&"ECC"===_.environment.id?_.user_type.id:"",editMode:!0})})]}),(null===_||void 0===_?void 0:_.service_type)&&_.service_type.id===Hn.AddProfile&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:3,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.profile_type",label:"Tipo Perfil",labelWithId:!1,getOptions:Kn.getSAPProfileTypeCollection,editMode:h.has_sap_job_positions})}),(null===_||void 0===_?void 0:_.profile_type)&&"2"===_.profile_type.id&&Object(fe.jsx)(Xt.a,{item:!0,xs:4,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.job_position",label:"Job Position",labelWithId:!1,defaultOptions:void 0,editMode:!0})}),(null===_||void 0===_?void 0:_.profile_type)&&"2"!==(null===_||void 0===_||null===(e=_.profile_type)||void 0===e?void 0:e.id)&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.is_temporary",label:"Tempor\xe1rio",labelWithId:!1,getOptions:Kn.getSAPTemporyFieldCollection,editMode:!0})})}),(null===_||void 0===_?void 0:_.profile_type)&&_.is_temporary&&"2"!==_.profile_type.id&&"S"===_.is_temporary.id&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Xt.a,{item:!0,xs:3,children:Object(fe.jsx)(tr.InputDatePicker,{label:"De",name:"sap.profile_start_date"})}),Object(fe.jsx)(Xt.a,{item:!0,xs:2,children:Object(fe.jsx)(tr.InputDatePicker,{label:"At\xe9",name:"sap.profile_end_date"})})]})]})}),(null===_||void 0===_?void 0:_.profile_type)&&(null===_||void 0===_?void 0:_.service_type)&&"2"!==_.profile_type.id&&(_.service_type.id===Hn.AddProfile||_.service_type.id===Hn.ExcludeProfile)&&f&&Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:12,children:Object(fe.jsx)(tr.InputSAPProfiles,{name:"sap.profiles",label:"Perfil",placeHolder:"Digite a descri\xe7\xe3o ou c\xf3digo de um perfil",parentValue:(null===_||void 0===_||null===(t=_.environment)||void 0===t?void 0:t.id)||"",editMode:!0,addToTable:!0,handleProfileChange:function(e){var t,n=e.map((function(e){var t,n,r,i,a,o,s,c,l,u,d,p,b,j,f,h,_,v,y,x,O,g;return{id:0,environment:null===m||void 0===m||null===(t=m.sap)||void 0===t||null===(n=t.environment)||void 0===n?void 0:n.id,service_id:null===m||void 0===m||null===(r=m.sap)||void 0===r||null===(i=r.service_type)||void 0===i?void 0:i.id,service_description:null===m||void 0===m||null===(a=m.sap)||void 0===a||null===(o=a.service_type)||void 0===o?void 0:o.description,user_id:null===m||void 0===m||null===(s=m.sap)||void 0===s||null===(c=s.user_id)||void 0===c?void 0:c.id,profile:e.id,profile_description:e.description,profile_type:null===m||void 0===m||null===(l=m.sap)||void 0===l||null===(u=l.profile_type)||void 0===u?void 0:u.description,job_position:"2"===(null===m||void 0===m||null===(d=m.sap)||void 0===d||null===(p=d.profile_type)||void 0===p?void 0:p.id)?"":null===m||void 0===m||null===(b=m.sap)||void 0===b||null===(j=b.job_position)||void 0===j?void 0:j.id,is_temporary:"S"===(null===m||void 0===m||null===(f=m.sap)||void 0===f||null===(h=f.is_temporary)||void 0===h?void 0:h.id),profile_start_date:"S"===(null===(_=m.sap)||void 0===_||null===(v=_.is_temporary)||void 0===v?void 0:v.id)?null===m||void 0===m||null===(y=m.sap)||void 0===y?void 0:y.profile_start_date:"",profile_end_date:"S"===(null===(x=m.sap)||void 0===x||null===(O=x.is_temporary)||void 0===O?void 0:O.id)?null===m||void 0===m||null===(g=m.sap)||void 0===g?void 0:g.profile_end_date:""}})),r=(null===m||void 0===m||null===(t=m.sap)||void 0===t?void 0:t.profiles_table)?[].concat(Object(St.a)(m.sap.profiles_table),Object(St.a)(n)):Object(St.a)(n),i=Array.from(r.reduce((function(e,t){return e.set(t.profile,t)}),new Map).values()).map((function(e,t){return e.id=t+1,e}));j("sap.profiles_table",i)},disabledOptions:_.profiles_table?null===(n=_.profiles_table)||void 0===n?void 0:n.map((function(e){return{id:e.profile,description:e.profile_description,email:""}})):[]})})})]}),Object(fe.jsxs)(Xt.a,{item:!0,xs:6,children:[Object(fe.jsxs)(Xt.a,{container:!0,spacing:1,children:[Object(fe.jsx)(Xt.a,{item:!0,xs:3,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.user_type",label:"Usuario",labelWithId:!1,getOptions:Kn.getSAPUserTypeCollection,optionsPrimaryKey:null===_||void 0===_||null===(r=_.service_type)||void 0===r?void 0:r.id,editMode:"ECC"!==(null===_||void 0===_||null===(i=_.environment)||void 0===i?void 0:i.id)})}),Object(fe.jsx)(Xt.a,{item:!0,xs:8,children:Object(fe.jsx)(tr.InputSelect,{name:"sap.user_id",label:"User ID",labelWithId:!0,getOptions:Kn.getSAPUserIdCollection,optionsPrimaryKey:null===_||void 0===_||null===(o=_.environment)||void 0===o?void 0:o.id,editMode:"ECC"!==(null===_||void 0===_||null===(s=_.environment)||void 0===s?void 0:s.id)&&"S"!==(null===_||void 0===_||null===(c=_.user_type)||void 0===c?void 0:c.id)})})]}),"ECC"===(null===_||void 0===_||null===(l=_.environment)||void 0===l?void 0:l.id)&&"S"===(null===_||void 0===_||null===(u=_.user_type)||void 0===u?void 0:u.id)&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:6,children:Object(fe.jsx)(tr.InputText,{name:"sap.user_licence",label:"Reutilizar licen\xe7a",fullWidth:!0,inputProps:{readOnly:!1}})})})})]}),((null===_||void 0===_||null===(d=_.service_type)||void 0===d?void 0:d.id)===Hn.AddProfile||(null===_||void 0===_||null===(p=_.service_type)||void 0===p?void 0:p.id)===Hn.ExcludeProfile)&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Xt.a,{item:!0,xs:12,children:Object(fe.jsx)(Xt.a,{container:!0,spacing:1,children:Object(fe.jsx)(Xt.a,{item:!0,xs:12,children:Object(fe.jsx)(Br,{rows:null===_||void 0===_?void 0:_.profiles_table,removeProfile:function(e){var t;if(null===m||void 0===m||null===(t=m.sap)||void 0===t?void 0:t.profiles_table){var n,r=Object(St.a)(null===m||void 0===m||null===(n=m.sap)||void 0===n?void 0:n.profiles_table),i=r.find((function(t){return t.id===e})),a=r.filter((function(t){return t.id!==e}));if(a.map((function(e,t){return e.id=t+1,e})),j("sap.profiles_table",a),m.sap.profiles&&i){var o=Object(St.a)(m.sap.profiles).filter((function(e){return e.id!==i.profile}));j("sap.profiles",o)}}}})})})})})]})})}var Fr=a.a.forwardRef((function(e,t){return Object(fe.jsx)(fr.a,Object(m.a)({elevation:6,ref:t,variant:"filled"},e))}));function Mr(){var e=Object(In.d)(),t=e.values,n=e.setFieldValue,r=e.status,i=t.request,o=t.sap;return a.a.useEffect((function(){var e=function(){var e,t={requested_by_id:i.request_by?i.request_by:"",requested_by_name:i.request_by?i.request_by:"",requested_by_email:i.request_by?i.request_by:"",request_number:"",request_status:-1,request_type:"SAP",request_observation:i.request_observation,request_copy_list:"falta",employee_id:i.employee.id,employee_fullname:i.employee.description,employee_email:i.employee.email?i.employee.email:"",employee_type:i.employee_type?i.employee_type.id:"",employee_type_description:i.employee_type?i.employee_type.description:"",employee_profile_edition_rule:i.employee_profile_edition_rule,employee_role_id:i.employee_role?i.employee_role.id:"",employee_role_description:i.employee_role?i.employee_role.description:"",employee_plataform_id:i.employee_plataform?i.employee_plataform.id:"",employee_plataform_description:i.employee_plataform?i.employee_plataform.description:"",employee_costcenter_id:i.employee_costcenter?i.employee_costcenter.id:"",employee_costcenter_description:i.employee_costcenter?i.employee_costcenter.description:"",employee_company_id:i.employee_company?i.employee_company.id:"",employee_company_description:i.employee_company?i.employee_company.description:"",employee_branch_id:i.employee_branch?i.employee_branch.id:"",employee_branch_description:i.employee_branch?i.employee_branch.description:"",employe_manager_id:i.employee_manager?i.employee_manager.id:"",employee_manager_name:i.employee_manager?i.employee_manager.description:"",employee_login:i.employee_userid_login?i.employee_userid_login:"",employee_sap_id:i.employee_userid_sap?i.employee_userid_sap:"",employee_userid_sap_status:i.employee_userid_sap_status?i.employee_userid_sap_status:"",employee_userid_sap_expiration_date:i.employee_userid_sap_status?i.employee_userid_sap_status:"",employee_as400_id:"",employee_userid_as400_description:"",updateEmployee:!!i.updateEmployee&&i.updateEmployee},n={service_id:"",service_description:"",environment:"",is_new_user:!1,user_id:"",reused_user_id_license:"",observation:""};if(o.service_type.id===Hn.BlockUser)return n.service_id=Hn.BlockUser,n.service_description="Bloqueio de Usu\xe1rio",n.environment=o.environment.id,n.is_new_user=!1,n.user_id=o.user_id.id,n.reused_user_id_license=o.user_licence,n.observation="",{employee:t,user:n};"S"===o.user_type.id&&(n.service_id=Hn.CreateUser,n.environment=o.environment.id,n.service_description="Cria\xe7\xe3o de Usu\xe1rio",n.is_new_user=!0,n.user_id=o.user_id.id,n.reused_user_id_license=o.user_licence,n.observation=""),"D"===o.user_type.id&&(n.service_id=Hn.UnBlockUser,n.service_description="Desbloqueio de Usu\xe1rio",n.environment=o.environment.id,n.is_new_user=!1,n.user_id=o.user_id.id,n.reused_user_id_license=o.user_licence,n.observation="");var r=null===(e=o.profiles_table)||void 0===e?void 0:e.map((function(e){return{service_id:e.service_id,service_description:e.service_description,environment:e.environment,is_new_user:n.is_new_user,user_id:e.user_id,is_job_postion:""!==e.job_position,job_position:e.job_position,profile_name:e.profile,profile_description:e.profile_description,is_profile_temporary:e.is_temporary,profile_valide_at:new Date(e.profile_start_date),profile_expires_at:new Date(e.profile_end_date),has_conflict:!1,restricted_access:!1}}));return""===n.service_id?{employee:t,profiles:r}:{employee:t,user:n,profiles:r}}();n("data",e)}),[]),Object(fe.jsxs)(hr.a,{spacing:2,sx:{width:"100%",marginTop:"120px",alignContent:"center",justifyContent:"center",alignItems:"center"},children:[!r&&Object(fe.jsx)(Fr,{severity:"info",children:"Clique em enviar para registrar sua solicita\xe7\xe3o"}),r&&(null===r||void 0===r?void 0:r.isError)&&Object(fe.jsx)(Fr,{severity:"error",children:r.error}),r&&!(null===r||void 0===r?void 0:r.isError)&&Object(fe.jsxs)(Fr,{severity:"success",children:["Solicita\xe7\xe3o criada com sucesso: ",r.data.request_number]})]})}var zr=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function Vr(){return Object(fe.jsx)(_t.a,{sx:{marginTop:"4px","& .MuiTextField-root":{m:1,minWidth:"30px"},"& .MuiInputBase-root":{m:1,minWidth:"30px"},"& .MuiDataGrid-root":{m:1,minWidth:"30px"}},children:Object(fe.jsxs)(An,{initialValues:Object(m.a)({},qr),onSubmit:function(){var e=Object(Q.a)(Z.a.mark((function e(t,n){var r,i,a,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zr(3e3);case 3:return console.log("values",t.data),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.data)},e.next=7,fetch("".concat("http://localhost:3333","/requests/sap"),r);case 7:return i=e.sent,e.next=10,i.json();case 10:a=e.sent,i.ok?n.setStatus({isError:!1,data:a}):(o=a&&a.message||i.status,n.setStatus({isError:!0,error:o})),n.setSubmitting(!1),console.log(a),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),children:[Object(fe.jsx)(En,{label:"dados do colaborador",validationSchema:Ar,children:Object(fe.jsx)(Or,{})}),Object(fe.jsx)(En,{label:"servi\xe7o SAP",validationSchema:Tr,children:Object(fe.jsx)(Lr,{})}),Object(fe.jsx)(En,{label:"ZSOD",children:"Justificativa ZSOD"}),Object(fe.jsx)(En,{label:"Fim",children:Object(fe.jsx)(Mr,{})})]})})}var Gr=["component","location"],Hr=function(e){var t=e.component,n=e.location,r=Object(st.a)(e,Gr),i=ye().accountInfo;return Object(fe.jsx)(p.b,Object(m.a)(Object(m.a)({},r),{},{render:function(e){return(null===i||void 0===i?void 0:i.isAuthenticated)?Object(fe.jsx)(t,Object(m.a)({},e)):Object(fe.jsx)(p.a,{to:{pathname:"/signin",state:{from:n}}})}}))},Jr=Object(c.a)({palette:{primary:{main:"#31546d",light:"#5f809b",dark:"#002b42"},secondary:{main:"#5c6670",light:"#89949e",dark:"#323c45"}}});function Xr(){return Object(fe.jsx)(l.a,{injectFirst:!0,children:Object(fe.jsx)(u.a,{theme:Jr,children:Object(fe.jsx)(d.a,{children:Object(fe.jsx)(ve,{children:Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(p.d,{children:Object(fe.jsxs)(ot,{children:[Object(fe.jsx)(p.b,{path:"/signin",exact:!0,component:On}),Object(fe.jsx)(Hr,{path:"/",exact:!0,component:Tt}),Object(fe.jsx)(Hr,{path:"/home",exact:!0,component:Tt}),Object(fe.jsx)(Hr,{path:"/requests",exact:!0,component:yn}),Object(fe.jsx)(p.b,{path:"/sap/request",exact:!0,component:Vr}),Object(fe.jsx)(p.b,{path:"/as400/request",exact:!0,component:Ur}),Object(fe.jsx)(Hr,{path:"/request/:id",exact:!0,component:en}),Object(fe.jsx)(Hr,{path:"/requests/ordered/:orderby",exact:!0,component:yn})]})})})})})})})}s.a.render(Object(fe.jsxs)(a.a.StrictMode,{children:[Object(fe.jsx)(r.a,{}),Object(fe.jsx)(Xr,{})]}),document.getElementById("root"))}},[[488,1,2]]]);
//# sourceMappingURL=main.69307e13.chunk.js.map